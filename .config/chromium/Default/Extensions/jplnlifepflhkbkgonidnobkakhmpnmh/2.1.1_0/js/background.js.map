{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/core-js/modules/_global.js","webpack:///./node_modules/core-js/modules/_export.js","webpack:///./node_modules/core-js/modules/_descriptors.js","webpack:///./node_modules/core-js/modules/_wks.js","webpack:///./node_modules/core-js/modules/_a-function.js","webpack:///./node_modules/core-js/modules/_to-object.js","webpack:///./node_modules/core-js/modules/_hide.js","webpack:///./node_modules/core-js/modules/_object-dp.js","webpack:///./node_modules/core-js/modules/_is-object.js","webpack:///./node_modules/core-js/modules/_fails.js","webpack:///./node_modules/core-js/modules/_core.js","webpack:///./node_modules/core-js/modules/_an-object.js","webpack:///./node_modules/core-js/modules/_has.js","webpack:///./src/js/helpers/applyListener.js","webpack:///./src/js/data/https-upgrade.js","webpack:///./node_modules/core-js/modules/_to-primitive.js","webpack:///./node_modules/core-js/modules/_library.js","webpack:///./node_modules/core-js/modules/_object-forced-pam.js","webpack:///./node_modules/core-js/modules/_to-iobject.js","webpack:///./node_modules/core-js/modules/_dom-create.js","webpack:///./node_modules/core-js/modules/_property-desc.js","webpack:///./node_modules/core-js/modules/_redefine.js","webpack:///./node_modules/core-js/modules/_uid.js","webpack:///./node_modules/core-js/modules/_shared.js","webpack:///./node_modules/core-js/modules/_ctx.js","webpack:///./node_modules/core-js/modules/_cof.js","webpack:///./node_modules/core-js/modules/_to-length.js","webpack:///./node_modules/core-js/modules/_defined.js","webpack:///./node_modules/core-js/modules/_object-gpo.js","webpack:///./node_modules/core-js/modules/_shared-key.js","webpack:///./node_modules/core-js/modules/_iterators.js","webpack:///./src/js/helpers/http.js","webpack:///./node_modules/core-js/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/modules/_is-array.js","webpack:///./node_modules/core-js/modules/_to-integer.js","webpack:///./node_modules/core-js/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/modules/_object-gopd.js","webpack:///./node_modules/core-js/modules/_string-trim.js","webpack:///./node_modules/core-js/modules/_html.js","webpack:///./node_modules/core-js/modules/_object-keys.js","webpack:///./node_modules/core-js/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/modules/es7.array.flat-map.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/es7.object.define-getter.js","webpack:///./node_modules/core-js/modules/es7.object.define-setter.js","webpack:///./node_modules/core-js/modules/es7.object.lookup-getter.js","webpack:///./node_modules/core-js/modules/es7.object.lookup-setter.js","webpack:///./node_modules/core-js/modules/es7.promise.finally.js","webpack:///./node_modules/core-js/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/modules/es7.string.trim-left.js","webpack:///./node_modules/core-js/modules/es7.string.trim-right.js","webpack:///./node_modules/core-js/modules/web.timers.js","webpack:///./node_modules/core-js/modules/web.immediate.js","webpack:///./node_modules/core-js/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/modules/_function-to-string.js","webpack:///./node_modules/core-js/modules/_flatten-into-array.js","webpack:///./node_modules/core-js/modules/_array-species-create.js","webpack:///./node_modules/core-js/modules/_array-species-constructor.js","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/core-js/modules/_object-pie.js","webpack:///./node_modules/core-js/modules/_iobject.js","webpack:///./node_modules/core-js/modules/_species-constructor.js","webpack:///./node_modules/core-js/modules/_promise-resolve.js","webpack:///./node_modules/core-js/modules/_new-promise-capability.js","webpack:///./node_modules/core-js/modules/_wks-define.js","webpack:///./node_modules/core-js/modules/_wks-ext.js","webpack:///./node_modules/core-js/modules/_string-ws.js","webpack:///./node_modules/core-js/modules/_user-agent.js","webpack:///./node_modules/core-js/modules/_task.js","webpack:///./node_modules/core-js/modules/_invoke.js","webpack:///./node_modules/core-js/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/modules/_iter-step.js","webpack:///./node_modules/core-js/modules/_iter-define.js","webpack:///./node_modules/core-js/modules/_iter-create.js","webpack:///./node_modules/core-js/modules/_object-create.js","webpack:///./node_modules/core-js/modules/_object-dps.js","webpack:///./node_modules/core-js/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/modules/_array-includes.js","webpack:///./node_modules/core-js/modules/_to-absolute-index.js","webpack:///./src/js/eventhandler/onError.js","webpack:///./src/js/util/buildinfo.js","webpack:///./node_modules/process/browser.js","webpack:///./src/js/util/storage.js","webpack:///./src/js/helpers/reportError.js","webpack:///./src/js/util/settings.js","webpack:///./src/js/util/icon.js","webpack:///./src/js/util/regionlist.js","webpack:///./src/js/helpers/compare.js","webpack:///./src/js/util/regionsorter.js","webpack:///./src/js/util/user.js","webpack:///./src/js/util/bypasslist.js","webpack:///./src/js/util/latencymanager.js","webpack:///./src/js/util/logger.js","webpack:///./src/js/util/counter.js","webpack:///./src/js/util/settingsmanager.js","webpack:///./src/js/util/errorinfo.js","webpack:///./src/js/util/i18n.js","webpack:///./src/js/util/platforminfo.js","webpack:///./src/js/util/https-upgrade/rulesets.js","webpack:///./src/js/util/https-upgrade/index.js","webpack:///./src/js/contentsettings/contentsetting.js","webpack:///./src/js/contentsettings/microphone.js","webpack:///./src/js/contentsettings/camera.js","webpack:///./src/js/contentsettings/location.js","webpack:///./src/js/contentsettings/flash.js","webpack:///./src/js/contentsettings/extension_notification.js","webpack:///./src/js/chromesettings/chromesetting.js","webpack:///./src/js/chromesettings/hyperlinkaudit.js","webpack:///./src/js/chromesettings/webrtc.js","webpack:///./src/js/chromesettings/thirdpartycookies.js","webpack:///./src/js/chromesettings/httpreferer.js","webpack:///./src/js/chromesettings/networkprediction.js","webpack:///./src/js/chromesettings/safebrowsing.js","webpack:///./src/js/chromesettings/proxy.js","webpack:///./src/js/chromesettings/autofill.js","webpack:///./src/js/chromesettings/autofillcreditcard.js","webpack:///./src/js/chromesettings/autofilladdress.js","webpack:///./src/js/eventhandler/chrome/webrequest/onAuthRequired.js","webpack:///./src/js/eventhandler/chrome/webrequest/onBeforeRedirect.js","webpack:///./src/js/eventhandler/chrome/webrequest/onBeforeRequest.js","webpack:///./src/js/eventhandler/chrome/webrequest/onCompleted.js","webpack:///./src/js/eventhandler/chrome/webrequest/onErrorOccurred.js","webpack:///./src/js/eventhandler/chrome/runtime/onInstalled.js","webpack:///./src/js/eventhandler/chrome/runtime/onMessage.js","webpack:///./src/js/eventhandler/chrome/runtime/onUpdateAvailable.js","webpack:///./src/js/eventhandler/chrome/cookies/onChanged.js","webpack:///./src/js/eventhandler/chrome/alarms/onAlarm.js","webpack:///./src/js/eventhandler/eventhandler.js","webpack:///./src/js/background.js"],"names":["createApplyListener","fn","app","api","addListener","bind","MessageType","EXTRACT_REQ","EXTRACT_RES","LATEST_TIMESTAMP_FILE","RULESET_FILE_TEMPLATE","STORAGE_PREFIX","LAST_UPDATED_KEY","LAST_TIMESTAMP_KEY","STORAGE_TEMPLATE","STORAGE_COUNT_KEY","channels","name","urlPrefix","COUNTER_LIMIT","PART_SIZE","ALARM_NAME","TIMED_OUT","Symbol","wait","time","Promise","_","reject","setTimeout","addTimeout","promise","timeout","race","getResult","request","result","ok","augmentError","error","cause","Object","assign","JSON","parse","stringify","getOwnPropertyNames","addCause","err","errWithCause","Error","window","navigator","onLine","getOpts","methodOpts","clientOpts","method","mode","credentials","cache","redirect","referrer","integrity","defaultHeaders","headers","clientHeaders","body","createMethod","url","opts","fetch","http","get","head","post","onError","basename","filename","split","slice","e","lineno","message","logger","debug","console","log","getFormattedBrowser","browser","process","firstChar","tail","toLocaleUpperCase","self","create","version","date","Date","coupon","gitcommit","env","COMMIT_HASH","gitbranch","GIT_BRANCH","freeze","Storage","constructor","hasItem","getItem","setItem","removeItem","stores","MEMORY","sessionStorage","LOCAL","localStorage","key","store","validateStoreAndKey","item","createOperationError","value","newValue","validateStore","validateKey","type","isString","isEmpty","msg","operation","reportError","args","act","errorMessage","length","ApplicationIDs","BLOCK_PLUGINS","BLOCK_UTM","BLOCK_FBCLID","MACE_PROTECTION","DEBUG_MODE","REMEMBER_ME","DARK_THEME","HTTPS_UPGRADE","Settings","appDefaults","init","toggle","getControllable","enabled","storage","util","proxy","contentSettings","contentsettings","chromeSettings","chromesettings","regionlist","apiSettings","values","allSettings","appIDs","map","setting","settingID","apiIDs","settingIDs","getInternalApiSetting","find","existsApplicationSetting","Boolean","validID","includes","toggleSetting","toggleApplicationSetting","enable","catch","removeEntries","toggleApiSetting","isApplied","clearSetting","applySetting","call","user","getLoggedIn","forEach","settingDefault","apiSetting","String","getAvailable","getApiSetting","isAvailable","isControllable","s","Icon","greenRobots","redRobots","newCanvasCtx","image","canvas","document","createElement","width","height","getContext","newImage","imagePath","resolve","Image","src","onload","onerror","drawImage","ctx","x","y","drawBorder","color","lineWidth","strokeStyle","strokeRect","drawFlagOnto","flag","fctx","getImageData","putImageData","getFlagPath","regionISO","size","getFlagUrl","generateIcon","imageData","region","images","robot","iso","generateErrorIcon","redrobot","online","imagePromises","getSelectedRegion","keys","push","all","then","chrome","browserAction","setIcon","updateTooltip","offline","title","buildinfo","t","localizedName","setTitle","badgeInfo","text","setBadgeText","setBadgeBackgroundColor","OVERRIDE_KEY","RegionList","testHost","testPort","getPotentialRegions","getPotentialHosts","getPotentialPorts","initialOverrideRegions","addOverrideRegion","updateOverrideRegion","removeOverrideRegion","getOverrideArray","updateRegion","getRegion","hasRegions","hasRegion","getIsAuto","setIsAuto","getFastestRegion","getAutoRegion","setAutoRegion","getRegions","toArray","isSelectedRegion","setSelectedRegion","sync","setFavoriteRegion","normalRegions","overrideRegions","isAutoString","isAuto","alarms","delayInMinutes","periodInMinutes","host","port","regions","fromStorage","fromMemory","storageRegion","id","r","settings","fromStorageMap","localize","createOverrideRegion","override","wasSelected","createOverrideID","active","toSelect","undefined","regionsorter","sorted","latencySort","autoRegion","clearActive","currentRegion","thisRegion","selectedRegion","clearRegion","activeRegions","filter","bypasslist","latencymanager","favoriteRegions","response","json","regionID","createNormalRegion","isFavorite","updatePingGateways","run","memRegion","currentFavs","favs","Set","join","fav","newRegion","trim","toLowerCase","replace","localized","lowerCaseName","ping","macePort","scheme","latency","dns","mace","debugMsg","errMsg","ERROR","PENDING","byLatency","a","b","RegionSorter","nameSort","sort","localeCompare","compare","USERNAME_KEY","PASSWORD_KEY","LOGGED_IN_KEY","REMEMBER_ME_KEY","AUTH_TOKEN_KEY","AUTH_TIMEOUT","AUTH_ENDPOINT","ACCOUNT_ENDPOINT","User","setLoggedIn","getRememberMe","setRememberMe","getUsername","setUsername","getPassword","getAuthToken","setAuthToken","setAccount","updateAccount","auth","logout","authTimeout","account","accountString","username","authToken","loggedIn","icon","password","settingsmanager","disable","rememberMe","email","Authorization","res","rawUsername","options","resBody","token","cb","BypassList","generatePingGateways","isRuleEnabled","popularRulesByName","visibleSize","restartProxy","getUserRules","setUserRules","addUserRule","removeUserRule","enablePopularRule","disablePopularRule","enabledPopularRules","saveRulesToFile","importRules","spawnImportTab","storageKeys","userrk","poprk","enabledRules","Map","netflixBypassRules","huluBypassRules","popularRules","trimUserRules","rules","https","concat","set","ruleName","has","Array","from","string","userString","endsWith","substring","userRules","complete","delete","enabledRulesByName","importRuleSet","importedRules","getRules","enableRule","disableRule","isArray","rule","tabs","runtime","getURL","LatencyManager","MAX_CONCURRENT","ROUNDS","start","performance","now","queue","tests","array","runTest","end","duration","Math","floor","round","pop","results","i","shift","Logger","entries","MAX_LOG_SIZE","listeners","getEntries","addEventListener","removeEventListener","condition","toISOString","listener","reverse","event","currentListeners","filteredListeners","table","member","inc","del","clear","csettings","alwaysActive","apply","SettingsMananger","reapply","errorMap","generateID","errorID","random","toString","errorName","deleted","i18n","acceptedLocales","translations","rerouteMap","detectBrowserLocale","locale","getUILanguage","languageMap","detectLocale","storageLocale","domainMap","worker","defaultLocale","domain","variables","getMessage","varKey","RegExp","changeLocale","os","arch","naclArch","ready","isWindows","lineEnding","getPlatformInfo","details","nacl_arch","getDefaultChannel","c","applyRuleset","ruleset","exclusions","test","applied","to","debugTime","getStoredRulesets","storageCount","Number","isNaN","ops","part","local","data","lastError","parts","op","setStoredRulesets","oldCount","addOps","remove","getTimestamp","channel","trimmed","getBuffer","rulesFileUrl","arrayBuffer","extract","rulesBuffer","Worker","reqID","payload","extracted","terminate","postMessage","getHostedRulesets","buffer","rulesets","exclusion","splice","partsToTargetMap","target","add","HttpsUpgrade","onAlarm","attemptUpdate","getPotentialRulesets","onBeforeRequest","onCookieChanged","onCompleted","onErrorOccurred","onBeforeRedirect","rulesetsCache","counter","cookieCache","hrefBlacklist","updating","enabledTracker","upgradeToSecureAvailable","initializing","initOps","op1","fromLocation","numRules","reduce","count","arr","alarm","performUpdate","timestamp","lastTimestamp","isValidDomain","getRulesets","exactMatches","exactMatch","splits","root","subdomains","matches","match","shouldSecureCookie","cookie","shouldSecure","next","charAt","potentialRules","cacheItem","fakeUrl","securecookie","cr","URL","hostname","href","requestId","matchedRuleset","upgradedUrl","withCredentials","upgradeToSecure","redirectUrl","removed","secure","secureCookie","path","httpOnly","expirationDate","storeId","hostOnly","sameSite","firstPartyDomain","startsWith","cookies","parseCount","contentSetting","defaultSetRules","primaryPattern","scope","defaultClearRules","ask","blocked","allowed","isAsk","isBlocked","isAllowed","_set","_clear","ContentSetting","microphone","camera","location","plugins","resourceIdentifier","defaultOptions","notifications","Notification","ChromeSetting","defaultSetOptions","defaultGetOptions","defaultClearOptions","controlled","controllable","notControllable","getLevelOfControl","onChange","createApplySetting","createClearSetting","levelOfControl","setLevelOfControl","setBlocked","action","HyperLinkAudit","privacy","websites","hyperlinkAuditingEnabled","WebRTCSetting","network","webRTCIPHandlingPolicy","blockable","ThirdPartyCookies","thirdPartyCookiesAllowed","HttpReferer","referrersEnabled","NetworkPrediction","networkPredictionEnabled","SafeBrowsing","services","safeBrowsingEnabled","ONLINE_KEY","BrowserProxy","settingsInMemory","readSettings","getEnabled","areSettingsInMemory","changing","proxyRule","createProxyRule","singleProxy","bypassList","AutoFill","autofillEnabled","autofillAddressEnabled","autofillCreditCardEnabled","AutoFillCreditCard","AutoFillAddress","authenticate","hostR","proxyEnabled","isValidHost","challenger","isValidPort","isActive","isProxy","handle","update","extension","cancel","authCredentials","tokenUser","tokenPass","reload","tabId","urls","httpsUpgrade","connFailRedirect","errorinfo","connUrl","isConnFailReload","getErrorUrl","searchParams","sendMessage","filterQueryParameters","filterLists","blockutm","blockfbclid","containsFilterQueries","filterList","param","createFilteredUrl","copy","queryParam","getFilterList","webRequest","openErrorPage","networkErrors","tabQueries","status","connectedToPIA","errorOnMainFrame","catchableError","indexOf","query","tab","errorPageURL","newVersionNotification","isNewVersion","newVersionStr","oldVersionStr","oldVersion","parseInt","newVersion","notify","appVersion","previousVersion","extensionNotification","reason","initOnMessage","_sender","sendResponse","m","localeKey","initReload","inLocalStorage","initOnAlarm","applyOnAuthRequired","onAuthRequired","applyOnBeforeRedirect","applyOnBeforeRequest","applyWebRequestOnCompleted","applyOnWebRequestError","applyOnInstalled","onInstalled","applyOnMessage","onMessage","applyOnUpdateAvailable","onUpdateAvailable","applyOnChanged","onChanged","applyOnAlarm","applyOnError","isFrozen","deepFreeze","obj","p","frozen","BuildInfo","platforminfo","PlatformInfo","I18n","Counter","SettingsManager","ErrorInfo","eventhandler","EventHandler","Camera","Microphone","Location","flash","Flash","ExtensionNotification","networkprediction","httpreferer","hyperlinkaudit","HyperlinkAudit","webrtc","WebRTC","thirdpartycookies","safebrowsing","autofillcreditcard","autofilladdress","autofill","initSettings","proxyOnline"],"mappings":"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AAClC,aAAa,mBAAO,CAAC,EAAY;AACjC,qBAAqB,mBAAO,CAAC,CAAc;AAC3C;AACA,0DAA0D,sBAAsB;AAChF,kFAAkF,wBAAwB;AAC1G;;;;;;;ACRA,YAAY,mBAAO,CAAC,CAAQ;;;;;;;ACA5B;AACA;;;;;;;ACDA,aAAa,mBAAO,CAAC,CAAW;AAChC;;AAEA;;;;;;;ACHA,UAAU,mBAAO,CAAC,EAAQ;AAC1B,aAAa,mBAAO,CAAC,EAAW;AAChC,WAAW,mBAAO,CAAC,EAAS;AAC5B,UAAU,mBAAO,CAAC,EAAe;AACjC,aAAa,mBAAO,CAAC,CAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,EAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACfa;AACb,uBAAuB,mBAAO,CAAC,EAAuB;AACtD,WAAW,mBAAO,CAAC,EAAc;AACjC,gBAAgB,mBAAO,CAAC,EAAc;AACtC,gBAAgB,mBAAO,CAAC,EAAe;;AAEvC;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;ACj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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 117);\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var core = module.exports = { version: '2.6.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","export default function createApplyListener(fn) {\n  return (app, api) => {\n    fn(app, api.addListener.bind(api));\n  };\n}\n","// ======================================== //\n//                Messaging                 //\n// ======================================== //\n\nexport const MessageType = {\n  EXTRACT_REQ: 'extract',\n  EXTRACT_RES: 'extract_response',\n};\n\n// ======================================== //\n//                  Files                   //\n// ======================================== //\n\nexport const LATEST_TIMESTAMP_FILE = 'eff.default.ruleset.timestamp';\nexport const RULESET_FILE_TEMPLATE = 'eff.default.ruleset.latest.gz';\n\n// ======================================== //\n//               Storage Keys               //\n// ======================================== //\n\nconst STORAGE_PREFIX = 'https-upgrade';\n\nexport const LAST_UPDATED_KEY = `${STORAGE_PREFIX}::last-updated`;\nexport const LAST_TIMESTAMP_KEY = `${STORAGE_PREFIX}::last-timestamp`;\nexport const STORAGE_TEMPLATE = `${STORAGE_PREFIX}::%s`;\nexport const STORAGE_COUNT_KEY = `${STORAGE_PREFIX}::storage-count`;\n\n// ======================================== //\n//                 Channels                 //\n// ======================================== //\n\nexport const channels = [\n  {\n    name: 'default',\n    urlPrefix: 'https://s3.amazonaws.com/privateinternetaccess/',\n  },\n];\n\n// ======================================== //\n//                  General                 //\n// ======================================== //\n\nexport const COUNTER_LIMIT = 6;\nexport const PART_SIZE = 500;\nexport const ALARM_NAME = 'PollHttpsRules';\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = false;\n","'use strict';\n// Forced replacement prototype accessors methods\nmodule.exports = require('./_library') || !require('./_fails')(function () {\n  var K = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call\n  __defineSetter__.call(null, K, function () { /* empty */ });\n  delete require('./_global')[K];\n});\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar $toString = require('./_function-to-string');\nvar TO_STRING = 'toString';\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","module.exports = {};\n","const TIMED_OUT = Symbol('timed out');\n\n/**\n * Schedule a promise to reject after \"time\" ms\n *\n * @param {number} time timeout before rejecting promise\n */\nfunction wait(time) {\n  return new Promise((_, reject) => {\n    setTimeout(() => {\n      reject(TIMED_OUT);\n    }, time);\n  });\n}\n\n/**\n * Add a timeout to a promise\n *\n * The resulting promise will reject if the timeout expires before\n * the given promise resolves/rejects\n *\n * @template T\n *\n * @param {Promise<T>} promise Given promise\n * @param {number} timeout Amount of time\n *\n * @returns {Promise<T>} wrapped promise\n */\nfunction addTimeout(promise, timeout) {\n  return Promise.race([\n    promise,\n    wait(timeout),\n  ]);\n}\n\n/**\n * Get a result from a request, be it with or without a timeout\n *\n * @param {Promise<Response>} request The pending result of fetch request\n * @param {number} [timeout] Possible timeout on request\n *\n * @throws {Response} if response is not ok\n * @throws {Symbol} if timeout expires\n * @throws {Error} if generic error occurs\n */\nasync function getResult(request, timeout) {\n  let result;\n  if (timeout > 0) {\n    result = await addTimeout(request, timeout);\n  }\n  else {\n    result = await request;\n  }\n  if (!result.ok) {\n    throw result;\n  }\n  return result;\n}\n\n/**\n * Augment the provided error with cause and ok\n *\n * NOTE: Will fail to augment cyclic errors\n */\nfunction augmentError(error, cause) {\n  try {\n    return Object.assign(error, {\n      cause,\n    });\n  }\n  catch (_) {\n    return Object.assign(\n      JSON.parse(JSON.stringify(error, Object.getOwnPropertyNames(error))),\n      { cause },\n    );\n  }\n}\n\n/**\n * Add a cause to failed requests\n *\n * @param {Error|Response|Symbol} err thrown error from fetch request\n */\nfunction addCause(err) {\n  let errWithCause;\n  if (err === TIMED_OUT) {\n    errWithCause = augmentError(new Error('timeout occurred'), 'timeout');\n  }\n  else if (err.ok === false) {\n    errWithCause = augmentError(err, 'status');\n  }\n  else if (!window.navigator.onLine) {\n    errWithCause = augmentError(err, 'offline');\n  }\n  else {\n    errWithCause = augmentError(err, 'error');\n  }\n\n  return errWithCause;\n}\n\n/**\n * Get opts for fetch, allowing each method to have\n * unique defaults, and assigning logical defaults\n * if no other value is provided\n *\n * Logical defaults are currently based on Chrome's\n * default values\n *\n * @param {*} methodOpts Opts defined for method\n * @param {*} clientOpts Opts defined by user\n */\nfunction getOpts(methodOpts, clientOpts) {\n  const { method } = methodOpts;\n  if (!method) {\n    throw new Error('methodOpts must contain method');\n  }\n  const mode = clientOpts.mode || methodOpts.mode;\n  const credentials = clientOpts.credentials || methodOpts.credentials;\n  const cache = clientOpts.cache || methodOpts.cache || 'default';\n  const redirect = clientOpts.redirect || methodOpts.redirect || 'follow';\n  const referrer = clientOpts.referrer || methodOpts.referrer || 'client';\n  const integrity = clientOpts.integrity || methodOpts.integrity;\n  const defaultHeaders = methodOpts.headers || {};\n  const clientHeaders = clientOpts.headers || {};\n  const headers = Object.assign({}, defaultHeaders, clientHeaders);\n  const { body } = clientOpts;\n\n  return {\n    mode,\n    body,\n    credentials,\n    cache,\n    redirect,\n    referrer,\n    integrity,\n    headers,\n    method,\n  };\n}\n\n/**\n * Create a http request method utilizing native fetch api\n *\n * @param {*} methodOpts Optionally set logical defaults for the method\n */\nfunction createMethod(methodOpts = {}) {\n  return async (url, clientOpts = {}) => {\n    if (!url) {\n      throw new Error('must provide url for http requests');\n    }\n    // extract timeout (not native fetch opt)\n    const { timeout } = clientOpts;\n    const opts = getOpts(methodOpts, clientOpts);\n    const request = fetch(url, opts);\n    try {\n      // Await is important here in order to catch rejected promise\n      return await getResult(request, timeout);\n    }\n    catch (err) {\n      throw addCause(err);\n    }\n  };\n}\n\n/**\n * Utility for making http requests\n */\nconst http = {\n  get: createMethod({ method: 'GET' }),\n  head: createMethod({ method: 'HEAD' }),\n  post: createMethod({ method: 'POST' }),\n};\n\nexport default http;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap\nvar $export = require('./_export');\nvar flattenIntoArray = require('./_flatten-into-array');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar aFunction = require('./_a-function');\nvar arraySpeciesCreate = require('./_array-species-create');\n\n$export($export.P, 'Array', {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen, A;\n    aFunction(callbackfn);\n    sourceLen = toLength(O.length);\n    A = arraySpeciesCreate(O, 0);\n    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);\n    return A;\n  }\n});\n\nrequire('./_add-to-unscopables')('flatMap');\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineGetter__: function __defineGetter__(P, getter) {\n    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineSetter__: function __defineSetter__(P, setter) {\n    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupGetter__: function __lookupGetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.get;\n    } while (O = getPrototypeOf(O));\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupSetter__: function __lookupSetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.set;\n    } while (O = getPrototypeOf(O));\n  }\n});\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","require('./_wks-define')('asyncIterator');\n","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimLeft', function ($trim) {\n  return function trimLeft() {\n    return $trim(this, 1);\n  };\n}, 'trimStart');\n","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimRight', function ($trim) {\n  return function trimRight() {\n    return $trim(this, 2);\n  };\n}, 'trimEnd');\n","// ie9- setTimeout & setInterval additional parameters fix\nvar global = require('./_global');\nvar $export = require('./_export');\nvar userAgent = require('./_user-agent');\nvar slice = [].slice;\nvar MSIE = /MSIE .\\./.test(userAgent); // <- dirty ie9- check\nvar wrap = function (set) {\n  return function (fn, time /* , ...args */) {\n    var boundArgs = arguments.length > 2;\n    var args = boundArgs ? slice.call(arguments, 2) : false;\n    return set(boundArgs ? function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(this, args);\n    } : fn, time);\n  };\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout: wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});\n","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n","module.exports = require('./_shared')('native-function-to-string', Function.toString);\n","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar isArray = require('./_is-array');\nvar isObject = require('./_is-object');\nvar toLength = require('./_to-length');\nvar ctx = require('./_ctx');\nvar IS_CONCAT_SPREADABLE = require('./_wks')('isConcatSpreadable');\n\nfunction flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;\n  var element, spreadable;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      spreadable = false;\n      if (isObject(element)) {\n        spreadable = element[IS_CONCAT_SPREADABLE];\n        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);\n      }\n\n      if (spreadable && depth > 0) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1fffffffffffff) throw TypeError();\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n}\n\nmodule.exports = flattenIntoArray;\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","exports.f = {}.propertyIsEnumerable;\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction onError(app) {\n  const basename = (filename) => {\n    return filename.split('/').slice(-1);\n  };\n\n  return (e) => {\n    const { filename, lineno, message } = e;\n    // NOTE: This will catch any 'dead object' asynchronous bugs while the view is hanging.\n    try { app.logger.debug(`javascript error at ${basename(filename)}:${lineno}: ${message}`); }\n    catch (err) {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(onError(app));\n});\n","function getFormattedBrowser() {\n  const browser = process.env.BROWSER_NAME;\n  const [firstChar] = browser;\n  const tail = browser.slice(1);\n  return firstChar.toLocaleUpperCase() + tail;\n}\n\nexport default function () {\n  const self = Object.assign(Object.create(null), {\n    name: process.env.BUILD_NAME,\n    version: process.env.PIA_VERSION,\n    date: new Date(process.env.BUILD_DATE),\n    debug: process.env.NODE_ENV !== 'production',\n    coupon: process.env.COUPON,\n    gitcommit: process.env.COMMIT_HASH,\n    gitbranch: process.env.GIT_BRANCH,\n    browser: getFormattedBrowser(),\n  });\n\n  return Object.freeze(self);\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","class Storage {\n  constructor(app) {\n    this.app = app;\n\n    // bindings\n    this.hasItem = this.hasItem.bind(this);\n    this.getItem = this.getItem.bind(this);\n    this.setItem = this.setItem.bind(this);\n    this.removeItem = this.removeItem.bind(this);\n\n    // init\n    this.stores = {\n      [Storage.MEMORY]: window.sessionStorage,\n      [Storage.LOCAL]: window.localStorage,\n    };\n  }\n\n  /*------------------------------------------*/\n  /*                Public                    */\n  /*------------------------------------------*/\n\n  hasItem(key, store = Storage.LOCAL) {\n    if (Storage.validateStoreAndKey({ store, key })) {\n      const item = this.getItem(key, store);\n      return item !== null;\n    }\n    throw Storage.createOperationError('has');\n  }\n\n  getItem(key, store = Storage.LOCAL) {\n    if (Storage.validateStoreAndKey({ store, key })) {\n      return this.stores[store].getItem(key);\n    }\n\n    throw Storage.createOperationError('get');\n  }\n\n  setItem(key, value, store = Storage.LOCAL) {\n    if (Storage.validateStoreAndKey({ store, key })) {\n      let newValue = value;\n      if (typeof newValue === 'undefined' || newValue === null) {\n        newValue = '';\n      }\n      this.stores[store].setItem(key, newValue);\n    }\n    else {\n      throw Storage.createOperationError('set');\n    }\n  }\n\n  removeItem(key, store = Storage.LOCAL) {\n    if (Storage.validateStoreAndKey({ store, key })) {\n      this.stores[store].removeItem(key);\n    }\n    else {\n      throw Storage.createOperationError('remove');\n    }\n  }\n\n  /*------------------------------------------*/\n  /*                Static                    */\n  /*------------------------------------------*/\n\n  static validateStore(store) {\n    switch (store) {\n      case Storage.LOCAL:\n      case Storage.MEMORY:\n        return true;\n\n      default:\n        debug(`no such store type: ${store}`);\n        return false;\n    }\n  }\n\n  static validateKey(key) {\n    const type = typeof key;\n    const isString = type === 'string';\n    const isEmpty = isString && !key;\n    if (!isString || isEmpty) {\n      let msg = 'key must be a valid string. ';\n      if (!isString) {\n        msg += `was: ${type}`;\n      }\n      else {\n        msg += 'was: empty string';\n      }\n      debug(msg);\n      return false;\n    }\n    return true;\n  }\n\n  static validateStoreAndKey({ store, key }) {\n    return Storage.validateStore(store) && Storage.validateKey(key);\n  }\n\n  static createOperationError(operation) {\n    // Refer to errors thrown in validateStore or validateKey\n    return new Error(`could not ${operation} item, see above error for more information`);\n  }\n}\n\nStorage.LOCAL = 'localStorage';\nStorage.MEMORY = 'memoryStorage';\n\nexport default Storage;\n","function reportError(...args) {\n  const [name] = args;\n  const act = (err) => {\n    let errorMessage;\n    if (typeof err === 'string') {\n      errorMessage = err;\n    }\n    else {\n      errorMessage = JSON.stringify(err, Object.getOwnPropertyNames(err));\n    }\n\n    debug(`${name}: ${errorMessage}`);\n  };\n  if (args.length > 1) {\n    const err = args[1];\n    return act(err);\n  }\n  return act;\n}\n\nexport default reportError;\n","import reportError from '@helpers/reportError';\n/* Types\n\n  interface AppSetting {\n    settingDefault: boolean;\n    settingID: string;\n  }\n\n  interface ContentSetting extends AppSetting {\n    clearSetting(): void;\n    applySetting(): void;\n    isApplied(): boolean;\n  }\n\n  interface ChromeSetting extends ApiSetting {\n    isApplied(): boolean;\n    isControllable(): boolean;\n  }\n\n  type ApiSetting = ContentSetting | ChromeSetting;\n*/\n\nconst ApplicationIDs = {\n  BLOCK_PLUGINS: 'blockplugins',\n  BLOCK_UTM: 'blockutm',\n  BLOCK_FBCLID: 'blockfbclid',\n  MACE_PROTECTION: 'maceprotection',\n  DEBUG_MODE: 'debugmode',\n  REMEMBER_ME: 'rememberme',\n  DARK_THEME: 'darkTheme',\n  HTTPS_UPGRADE: 'httpsUpgrade',\n};\n\nclass Settings {\n  constructor(app) {\n    // properties\n    this.app = app;\n    this.appDefaults = Settings.appDefaults;\n\n    // bindings\n    this.init = this.init.bind(this);\n    this.hasItem = this.hasItem.bind(this);\n    this.getItem = this.getItem.bind(this);\n    this.setItem = this.setItem.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.getControllable = this.getControllable.bind(this);\n    this.enabled = this.enabled.bind(this);\n  }\n\n  /* App Getters */\n  get storage() { return this.app.util.storage; }\n\n  get proxy() { return this.app.proxy; }\n\n  get logger() { return this.app.logger; }\n\n  get contentSettings() { return this.app.contentsettings; }\n\n  get chromeSettings() { return this.app.chromesettings; }\n\n  get regionlist() { return this.app.util.regionlist; }\n\n  /* Transformations */\n\n  get apiSettings() {\n    return [...Object.values(this.contentSettings), ...Object.values(this.chromeSettings)];\n  }\n\n  get allSettings() { return [...this.appDefaults, ...this.apiSettings]; }\n\n  get appIDs() { return this.appDefaults.map((setting) => { return setting.settingID; }); }\n\n  get apiIDs() { return this.apiSettings.map((setting) => { return setting.settingID; }); }\n\n  get settingIDs() { return this.allSettings.map((setting) => { return setting.settingID; }); }\n\n  getInternalApiSetting(settingID) {\n    return this.apiSettings.find((setting) => { return setting.settingID === settingID; });\n  }\n\n  existsApplicationSetting(settingID) {\n    return Boolean(this.appDefaults.find((setting) => { return setting.settingID === settingID; }));\n  }\n\n  validID(settingID) {\n    if (!this.settingIDs.includes(settingID)) {\n      debug(`invalid settingID: ${settingID}`);\n      return false;\n    }\n\n    return true;\n  }\n\n  toggleSetting(settingID) {\n    const newValue = !this.getItem(settingID);\n    this.setItem(settingID, newValue);\n    return newValue;\n  }\n\n  /**\n   * Toggle application setting (side effects handled here)\n   *\n   * @param {string} settingID id of setting\n   *\n   * @returns {boolean} new value of setting\n   */\n  toggleApplicationSetting(settingID) {\n    const newValue = this.toggleSetting(settingID);\n\n    switch (settingID) {\n      case ApplicationIDs.MACE_PROTECTION:\n        if (this.app.proxy.enabled()) {\n          this.app.proxy.enable().catch(reportError('settings.js'));\n        }\n        break;\n\n      case ApplicationIDs.DEBUG_MODE:\n        if (!newValue) {\n          this.logger.removeEntries();\n        }\n        break;\n      default:\n        break;\n    }\n    return newValue;\n  }\n\n  /**\n   * Toggle API Setting (side effects handled by setting)\n   *\n   * @param {ApiSetting} setting Api Setting to toggle\n   *\n   * @returns {Promise<boolean>} new value of setting;\n   */\n  async toggleApiSetting(setting) {\n    const toggle = setting.isApplied() ? setting.clearSetting : setting.applySetting;\n    try {\n      await toggle.call(setting);\n    }\n    catch (_) {\n      debug(`failed to toggle setting: ${setting.settingID}`);\n    }\n    const newValue = setting.isApplied();\n    this.setItem(setting.settingID, newValue);\n\n    return newValue;\n  }\n\n  enabled() {\n    const { app: { util: { user } } } = this;\n    return user.getLoggedIn();\n  }\n\n  /**\n   * Initialize the setting values\n   *\n   * @returns {void}\n   */\n  init() {\n    this.allSettings.forEach((setting) => {\n      if (!this.hasItem(setting.settingID)) {\n        this.setItem(setting.settingID, setting.settingDefault);\n      }\n    });\n  }\n\n  /**\n   * Toggle the specified setting\n   *\n   * @param {string} settingID ID for setting\n   *\n   * @returns {Promise<boolean>} New value of setting\n   *\n   * @throws {Error} if settingID is not valid\n   */\n  async toggle(settingID) {\n    // Look for setting in application settings\n    if (this.existsApplicationSetting(settingID)) {\n      return this.toggleApplicationSetting(settingID);\n    }\n\n    const apiSetting = this.getInternalApiSetting(settingID);\n    if (apiSetting) {\n      return this.toggleApiSetting(apiSetting);\n    }\n\n    // No such setting\n    throw new Error(`settings.js: no such setting: ${settingID}`);\n  }\n\n  /**\n   * Determine whether the setting exists yet\n   *\n   * @param {string} settingID ID for setting\n   *\n   * @returns {boolean} whether setting exists in storage\n   *\n   * @throws {Error} if settingID is not valid\n   */\n  hasItem(settingID) {\n    if (this.validID(settingID)) {\n      return this.storage.hasItem(`settings:${settingID}`);\n    }\n\n    throw new Error('settings.js: cannot perform hasItem without valid settingID');\n  }\n\n  /**\n   * Get the specified setting value\n   *\n   * @param {string} settingID ID for setting\n   *\n   * @returns {boolean} value of setting\n   *\n   * @throws {Error} if settingID is not valid\n   */\n  getItem(settingID) {\n    if (this.validID(settingID)) {\n      return this.storage.getItem(`settings:${settingID}`) === 'true';\n    }\n\n    throw new Error('settings.js: cannot perform get without valid settingID');\n  }\n\n  /**\n   * Set the value of specified setting\n   *\n   * @param {string} settingID ID of setting\n   * @param {boolean} value new value for setting\n   *\n   * @throws {Error} if settingID is not valid\n   *\n   * @returns {void}\n   */\n  setItem(settingID, value) {\n    if (this.validID(settingID)) {\n      const newValue = String(value) === 'true';\n      this.storage.setItem(`settings:${settingID}`, newValue);\n    }\n    else {\n      throw new Error('settings.js: cannot perform set without valid settingID');\n    }\n  }\n\n  getAvailable(settingID) {\n    if (this.validID(settingID)) {\n      if (Object.values(ApplicationIDs).includes(settingID)) {\n        return true;\n      }\n      if (this.apiIDs.includes(settingID)) {\n        const setting = this.getApiSetting(settingID);\n        if (typeof setting.isAvailable === 'function') {\n          return setting.isAvailable();\n        }\n        return true;\n      }\n      return true;\n    }\n\n    throw new Error('settings.js: cannot get available w/o valid settingID');\n  }\n\n  /**\n   * Determine whether specified setting is controllable by user\n   *\n   * @param {string} settingID ID for setting\n   *\n   * @returns {boolean} Whether the setting is controllable by user\n   *\n   * @throws {Error} if settingID is not valid\n   */\n  getControllable(settingID) {\n    if (this.validID(settingID)) {\n      if (this.apiIDs.includes(settingID)) {\n        const setting = this.getInternalApiSetting(settingID);\n        // Chromesettings have function\n        if (typeof setting.isControllable === 'function') {\n          return setting.isControllable();\n        }\n\n        return true;\n      }\n\n      // By default controllable is true\n      return true;\n    }\n\n    throw new Error('settings.js: cannot get controllable without valid settingID');\n  }\n\n  /**\n   * Get the actual setting for specified API settingID\n   *\n   * @param {string} settingID ID of setting\n   *\n   * @returns {ApiSetting} setting corresponding to settingID\n   *\n   * @throws {Error} if settingID is not valid API setting\n   */\n  getApiSetting(settingID) {\n    if (!this.validID(settingID)) {\n      throw new Error('invalid settingID');\n    }\n    else if (this.apiIDs.includes(settingID)) {\n      return this.apiSettings.find((s) => { return s.settingID === settingID; });\n    }\n    else {\n      throw new Error('settings.js: getApiSetting requires settingID for ApiSetting, not AppSetting');\n    }\n  }\n\n  /**\n   * Default values for Application Settings\n   *\n   * Also used as list of acceptable application settingID's\n   */\n  static get appDefaults() {\n    return [\n      {\n        settingID: ApplicationIDs.BLOCK_PLUGINS,\n        settingDefault: true, /* TODO: unused until a bug in chrome is fixed. */\n      },\n      {\n        settingID: ApplicationIDs.BLOCK_UTM,\n        settingDefault: true,\n      },\n      {\n        settingID: ApplicationIDs.BLOCK_FBCLID,\n        settingDefault: true,\n      },\n      {\n        settingID: ApplicationIDs.MACE_PROTECTION,\n        settingDefault: true,\n      },\n      {\n        settingID: ApplicationIDs.DEBUG_MODE,\n        settingDefault: false,\n      },\n      {\n        settingID: ApplicationIDs.REMEMBER_ME,\n        settingDefault: true,\n      },\n      {\n        settingID: ApplicationIDs.DARK_THEME,\n        settingDefault: true,\n      },\n      {\n        settingID: ApplicationIDs.HTTPS_UPGRADE,\n        settingDefault: true,\n      },\n    ];\n  }\n}\n\nexport default Settings;\n","export default function Icon(app) {\n  const greenRobots = {\n    16: '/images/icons/icon16.png',\n    32: '/images/icons/icon32.png',\n    48: '/images/icons/icon48.png',\n    64: '/images/icons/icon64.png',\n    128: '/images/icons/icon128.png',\n  };\n  const redRobots = {\n    16: '/images/icons/icon16red.png',\n    32: '/images/icons/icon32red.png',\n    48: '/images/icons/icon48red.png',\n    64: '/images/icons/icon64red.png',\n    128: '/images/icons/icon128red.png',\n  };\n\n  const newCanvasCtx = (image) => {\n    const canvas = document.createElement('canvas');\n    canvas.width = image.width;\n    canvas.height = image.height;\n    return canvas.getContext('2d');\n  };\n\n  const newImage = (imagePath) => {\n    return new Promise((resolve, reject) => {\n      const image = new Image();\n      image.src = imagePath;\n      image.onload = () => { return resolve(image); };\n      image.onerror = reject;\n    });\n  };\n\n  const drawImage = (ctx, image, x = 0, y = 0) => {\n    ctx.drawImage(image, x, y, image.width, image.height);\n    return ctx;\n  };\n\n  const drawBorder = (ctx, map) => {\n    const {\n      width,\n      height,\n      color,\n      lineWidth,\n    } = map;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.strokeRect(0, 0, width, height);\n  };\n\n  const drawFlagOnto = (ctx, flag) => {\n    const fctx = drawImage(newCanvasCtx(flag), flag);\n    drawBorder(fctx, {\n      lineWidth: 1,\n      height: flag.height,\n      width: flag.width,\n      color: '#000000',\n    });\n    const image = fctx.getImageData(0, 0, flag.width, flag.height);\n    ctx.putImageData(image, 0, flag.width - (flag.width * (9 / 16)));\n  };\n\n  const getFlagPath = (regionISO, size) => {\n    return `/images/flags/${regionISO}_icon_${size}.png`;\n  };\n\n  const getFlagUrl = (regionISO, size) => {\n    return `https://www.privateinternetaccess.com/images/flags/icons/${regionISO}_icon_${size}px.png`;\n  };\n\n  const generateIcon = async (imageData, size, region) => {\n    let flag = null;\n    const images = imageData;\n    const robot = await newImage(greenRobots[size]);\n    const ctx = drawImage(newCanvasCtx(robot), robot);\n    try { flag = await newImage(getFlagPath(region.iso, size)); }\n    catch (e) {\n      try { flag = await newImage(getFlagUrl(region.iso, size)); }\n      catch (err) { debug(`icon.js: flag icon failed`); }\n    }\n    if (flag) { drawFlagOnto(ctx, flag); }\n    images[size] = ctx.getImageData(0, 0, robot.width, robot.height);\n  };\n\n  const generateErrorIcon = async (imageData, size) => {\n    const images = imageData;\n    const redrobot = await newImage(redRobots[size]);\n    const ctx = drawImage(newCanvasCtx(redrobot), redrobot);\n    images[size] = ctx.getImageData(0, 0, redrobot.width, redrobot.height);\n  };\n\n  this.online = async () => {\n    const imageData = {};\n    const imagePromises = [];\n    const region = app.util.regionlist.getSelectedRegion();\n\n    Object.keys(greenRobots).forEach((size) => {\n      imagePromises.push(generateIcon(imageData, size, region));\n    });\n\n    Promise.all(imagePromises)\n      .then(() => {\n        if (region && app.proxy.enabled()) {\n          chrome.browserAction.setIcon({ imageData });\n          debug('icon.js: set icon online');\n          this.updateTooltip();\n        }\n        else { debug('icon.js: ignore set icon online, not online'); }\n      });\n  };\n\n  this.offline = async () => {\n    const imageData = {};\n    const imagePromises = [];\n\n    Object.keys(greenRobots).forEach((size) => {\n      imagePromises.push(generateErrorIcon(imageData, size));\n    });\n\n    Promise.all(imagePromises)\n      .then(() => {\n        if (!app.proxy.enabled()) {\n          chrome.browserAction.setIcon({ imageData });\n          debug('icon.js: set icon offline');\n          this.updateTooltip();\n        }\n        else { debug('icon.js: ignore set icon offline, we\\'re online'); }\n      });\n  };\n\n  this.updateTooltip = () => {\n    let title;\n    const { proxy, buildinfo } = app;\n    const { regionlist, user } = app.util;\n    const region = regionlist.getSelectedRegion();\n\n    if (region && proxy.enabled()) {\n      title = t('YouAreConnectedTo', { region: region.localizedName() });\n    }\n    else {\n      title = user.getLoggedIn() ? t('YouAreNotConnected') : 'Private Internet Access';\n    }\n\n    // Badge\n    chrome.browserAction.setTitle({ title });\n    const badgeInfo = (() => {\n      switch (buildinfo.name) {\n        case 'beta':\n          return { text: buildinfo.name, color: '#FF0000' };\n        case 'dev':\n        case 'e2e':\n        case 'qa':\n          return { text: buildinfo.name, color: '#0198E1' };\n        default:\n          return null;\n      }\n    })();\n    if (badgeInfo) {\n      if (region && proxy.enabled()) {\n        chrome.browserAction.setBadgeText({ text: '' });\n      }\n      else {\n        const { text, color } = badgeInfo;\n        chrome.browserAction.setBadgeText({ text });\n        chrome.browserAction.setBadgeBackgroundColor({ color });\n      }\n    }\n    debug(`icon.js: tooltip updated`);\n  };\n\n  return this;\n}\n","import http from '@helpers/http';\n\nconst OVERRIDE_KEY = 'regionlist::override';\n\nclass RegionList {\n  constructor(app) {\n    // bindings\n    this.testHost = this.testHost.bind(this);\n    this.testPort = this.testPort.bind(this);\n    this.getPotentialRegions = this.getPotentialRegions.bind(this);\n    this.getPotentialHosts = this.getPotentialHosts.bind(this);\n    this.getPotentialPorts = this.getPotentialPorts.bind(this);\n    this.initialOverrideRegions = this.initialOverrideRegions.bind(this);\n    this.addOverrideRegion = this.addOverrideRegion.bind(this);\n    this.updateOverrideRegion = this.updateOverrideRegion.bind(this);\n    this.removeOverrideRegion = this.removeOverrideRegion.bind(this);\n    this.getOverrideArray = this.getOverrideArray.bind(this);\n    this.updateRegion = this.updateRegion.bind(this);\n    this.getRegion = this.getRegion.bind(this);\n    this.hasRegions = this.hasRegions.bind(this);\n    this.hasRegion = this.hasRegion.bind(this);\n    this.getIsAuto = this.getIsAuto.bind(this);\n    this.setIsAuto = this.setIsAuto.bind(this);\n    this.getFastestRegion = this.getFastestRegion.bind(this);\n    this.getAutoRegion = this.getAutoRegion.bind(this);\n    this.setAutoRegion = this.setAutoRegion.bind(this);\n    this.getRegions = this.getRegions.bind(this);\n    this.toArray = this.toArray.bind(this);\n    this.isSelectedRegion = this.isSelectedRegion.bind(this);\n    this.getSelectedRegion = this.getSelectedRegion.bind(this);\n    this.setSelectedRegion = this.setSelectedRegion.bind(this);\n    this.sync = this.sync.bind(this);\n    this.setFavoriteRegion = this.setFavoriteRegion.bind(this);\n\n\n    // init\n    this.app = app;\n    this.storage = this.app.util.storage;\n    this.normalRegions = {};\n    this.overrideRegions = this.initialOverrideRegions(this.storage);\n\n    // set isAuto property based on localStorage\n    const isAutoString = this.app.util.storage.getItem('autoRegion');\n    const region = this.app.util.storage.getItem('region');\n    if (isAutoString === 'true') { this.isAuto = true; }\n    else if (!isAutoString && !region) { this.isAuto = true; }\n    else { this.isAuto = false; }\n\n    // poll for new regions every 30 minutes\n    chrome.alarms.create('PollRegionList', { delayInMinutes: 30, periodInMinutes: 60 });\n  }\n\n  // ---------------------- Auth Tests --------------------- //\n\n  /**\n   * Test to see if the provided host is potentially used w/ active proxy\n   *\n   * @param {string} host The host to test\n   */\n  testHost(host) {\n    return this.getPotentialHosts().includes(host);\n  }\n\n  /**\n   * Test to see if the provided port is potentially used w/ active proxy\n   *\n   * @param {number} port The port to test\n   */\n  testPort(port) {\n    return this.getPotentialPorts().includes(port);\n  }\n\n  getPotentialRegions() {\n    let regions;\n    const { util: { storage } } = this.app;\n    const fromStorage = storage.getItem('region');\n    const fromMemory = this.getRegions();\n    if (fromStorage) {\n      const storageRegion = JSON.parse(fromStorage);\n      regions = Object.assign({}, fromMemory, {\n        [storageRegion.id]: storageRegion,\n      });\n    }\n    else {\n      regions = fromMemory;\n    }\n\n    return Object.values(regions);\n  }\n\n  /**\n   * Get a list of hosts that are potentially being used for the active proxy connection\n   */\n  getPotentialHosts() {\n    return this.getPotentialRegions()\n      .map((r) => { return r.host; });\n  }\n\n  /**\n   * Get a list of ports that are potentially being used for the active proxy connection\n   */\n  getPotentialPorts() {\n    const { util: { settings } } = this.app;\n    const key = settings.getItem('maceprotection') ? 'macePort' : 'port';\n\n    return this.getPotentialRegions()\n      .map((r) => { return r[key]; });\n  }\n\n  // -------------------- Override Regions ----------------------- //\n\n  initialOverrideRegions() {\n    let overrideRegions;\n    const fromStorage = this.storage.getItem(OVERRIDE_KEY);\n    if (fromStorage) {\n      overrideRegions = {};\n      const fromStorageMap = JSON.parse(fromStorage);\n      Object.keys(fromStorageMap).forEach((id) => {\n        overrideRegions[id] = RegionList.localize(fromStorageMap[id]);\n      });\n    }\n    else {\n      overrideRegions = {};\n      this.storage.setItem(OVERRIDE_KEY, JSON.stringify(overrideRegions));\n    }\n    return overrideRegions;\n  }\n\n  /**\n   * Add a new override region\n   */\n  addOverrideRegion({ name, host, port }) {\n    try {\n      const region = RegionList.createOverrideRegion({ name, host, port });\n      this.updateOverrideRegion(region);\n    }\n    catch (err) {\n      const msg = err.message || err;\n      debug(msg);\n      throw err;\n    }\n  }\n\n  updateOverrideRegion(region) {\n    if (!region.override || !region.id) {\n      throw new Error('invalid region');\n    }\n    this.overrideRegions[region.id] = region;\n    this.storage.setItem(OVERRIDE_KEY, JSON.stringify(this.overrideRegions));\n  }\n\n  /**\n   * Remove an existing override region by name\n   */\n  removeOverrideRegion(name) {\n    let wasSelected = false;\n    const id = RegionList.createOverrideID(name);\n    const region = this.overrideRegions[id];\n    delete this.overrideRegions[id];\n    if (region && region.active) {\n      wasSelected = true;\n      let toSelect = this.getFastestRegion();\n      if (!toSelect) {\n        ([toSelect] = this.getRegions());\n      }\n      if (toSelect) {\n        this.setSelectedRegion(this.getFastestRegion().id);\n      }\n    }\n    this.storage.setItem(OVERRIDE_KEY, JSON.stringify(this.overrideRegions));\n\n    return wasSelected;\n  }\n\n  /**\n   * Retrieve an array of override regions\n   */\n  getOverrideArray() {\n    return Object.values(this.overrideRegions);\n  }\n\n  // --------------------- General ---------------------- //\n\n  updateRegion(region) {\n    if (region.override) {\n      this.updateOverrideRegion(region);\n    }\n    else {\n      this.normalRegions[region.id] = region;\n    }\n  }\n\n  getRegion(id) {\n    return this.getRegions()[id];\n  }\n\n  /**\n   * Returns whether there are regions in memory\n   */\n  hasRegions() {\n    return !!this.toArray().length;\n  }\n\n  hasRegion(id) {\n    return !!this.getRegion(id);\n  }\n\n  /**\n   * Returns the isAuto flag, this determines whether the extension is in 'auto' mode\n   */\n  getIsAuto() {\n    return this.isAuto;\n  }\n\n  /**\n   * Sets the given value to isAuto and saves that value to localStorage\n   */\n  setIsAuto(value) {\n    this.isAuto = value;\n    this.app.util.storage.setItem('autoRegion', value);\n  }\n\n  /**\n   * Calculates the fastest region given current latency times.\n   * Can return undefined if no regions exists.\n   */\n  getFastestRegion() {\n    if (!this.hasRegions()) { return undefined; }\n    const regions = this.toArray();\n    const { regionsorter } = this.app.util;\n    const sorted = regionsorter.latencySort(regions);\n    return sorted[0];\n  }\n\n  /**\n   * Returns the 'auto' region, the fastest region based on latency\n   */\n  getAutoRegion() {\n    return this.autoRegion;\n  }\n\n  /**\n   * Sets autoRegion to an immutable copy of given region value.\n   */\n  setAutoRegion(region) {\n    this.autoRegion = Object.assign({}, region);\n  }\n\n  getRegions() {\n    return Object.assign({}, this.normalRegions, this.overrideRegions);\n  }\n\n  /**\n   * Iterates through the regionMap and sets the active property to false for all regions.\n   */\n  clearActive() {\n    this.toArray().forEach((currentRegion) => {\n      const thisRegion = currentRegion;\n      thisRegion.active = false;\n    });\n  }\n\n  toArray() {\n    return Object.values(this.getRegions());\n  }\n\n  isSelectedRegion(region) {\n    if (!this.getSelectedRegion()) { return false; }\n    return this.getSelectedRegion().id === region.id;\n  }\n\n  /*\n    NOTE: we keep an on-disk copy of the last selected region,\n    incase this method is called when the region list has\n    not synced.\n  */\n  getSelectedRegion() {\n    let selectedRegion;\n    let storageRegion;\n\n    // check if auto region is used\n    if (this.getIsAuto()) { selectedRegion = this.getAutoRegion(); }\n\n    // look for active region in memory\n    if (!selectedRegion) {\n      selectedRegion = this.toArray().find((region) => { return region.active; });\n    }\n\n    // look for active region in localStorage\n    if (!selectedRegion) { storageRegion = this.storage.getItem('region'); }\n    if (!selectedRegion && storageRegion) {\n      try {\n        selectedRegion = RegionList.localize(JSON.parse(storageRegion));\n      }\n      catch (_) { /* noop */ }\n    }\n\n    // selectedRegion can be undefined if there are no regions\n    return selectedRegion;\n  }\n\n  setSelectedRegion(id) {\n    let selectedRegion;\n    const clearRegion = (r) => { this.updateRegion(Object.assign({}, r, { active: false })); };\n    const activeRegions = this.toArray().filter((r) => { return r.active; });\n    activeRegions.forEach(clearRegion);\n\n    if (id === 'auto') {\n      this.setIsAuto(true);\n      selectedRegion = this.getAutoRegion();\n    }\n    else {\n      this.setIsAuto(false);\n      selectedRegion = this.getRegion(id);\n      if (!selectedRegion) { throw new Error(`no such region with id ${id}`); }\n\n      // Set new region active\n      this.updateRegion(Object.assign({}, selectedRegion, { active: true }));\n    }\n\n    this.storage.setItem('region', JSON.stringify(selectedRegion));\n  }\n\n  async sync() {\n    const { util: { storage, bypasslist, latencymanager } } = this.app;\n\n    // keep track of current favorite regions\n    let favoriteRegions = storage.getItem('favoriteregions');\n    if (favoriteRegions) { favoriteRegions = favoriteRegions.split(','); }\n    else { favoriteRegions = []; }\n\n    RegionList.debug('start sync');\n\n    try {\n      // get latest regions from server\n      const url = 'https://www.privateinternetaccess.com/api/client/services/https';\n      const response = await http.get(url, { timeout: 5000 });\n      const json = await response.json();\n\n      // clear current region data\n      this.normalRegions = {};\n\n      // replace with new data from server\n      Object.keys(json).forEach((regionID) => {\n        const region = RegionList.createNormalRegion(regionID, json[regionID]);\n        if (favoriteRegions.includes(region.id)) { region.isFavorite = true; }\n        this.normalRegions[region.id] = region;\n      });\n\n      // update bypasslist with new dns records\n      bypasslist.updatePingGateways();\n\n      // update region latency\n      await latencymanager.run();\n\n      // set new auto region\n      this.setAutoRegion(this.getFastestRegion());\n\n      // if auto mode and proxy is on, just connect to the new auto region\n      if (this.getIsAuto() && this.app.proxy.enabled()) {\n        await this.app.proxy.enable();\n      }\n\n      RegionList.debug('sync ok');\n      return response;\n    }\n    catch (err) {\n      RegionList.debug('sync error', err);\n      return err;\n    }\n  }\n\n  /**\n   * Toggle whether or not the provided region is favorited\n   *\n   * @param {*|string} region Provided region to toggle\n   */\n  setFavoriteRegion(region) {\n    const { util: { storage } } = this.app;\n\n    // Get regionID\n    let regionID = '';\n    if (typeof region === 'string') { regionID = region; }\n    else { regionID = region.id; }\n\n    // Determine current value of isFavorite\n    let isFavorite = false;\n    const memRegion = this.toArray().find((r) => { return r.id === regionID; });\n    ({ isFavorite } = memRegion);\n\n    // get current favorite regions from storage\n    let currentFavs = storage.getItem('favoriteregions');\n    if (currentFavs) { currentFavs = currentFavs.split(','); }\n    else { currentFavs = []; }\n\n    // update favorite regions in storage\n    if (!isFavorite) {\n      currentFavs.push(regionID);\n      const favs = [...new Set(currentFavs)];\n      storage.setItem('favoriteregions', favs.join(','));\n    }\n    else {\n      currentFavs = currentFavs.filter((fav) => { return fav !== regionID; });\n      storage.setItem('favoriteregions', currentFavs.join(','));\n    }\n\n    // Update in memory region\n    const newRegion = Object.assign({}, memRegion, { isFavorite: !isFavorite });\n    this.updateRegion(newRegion);\n  }\n\n  // --------------------- Static ---------------------- //\n\n  static createOverrideID(name) {\n    return `override::${name.trim().toLowerCase()}`.replace(' ', '_');\n  }\n\n  static localize(region) {\n    const localized = Object.assign({}, region, {\n      localizedName() {\n        if (localized.id.includes('override::')) {\n          return localized.name;\n        }\n        const name = t(localized.id);\n        return name.length > 0 ? name : localized.name;\n      },\n    });\n\n    return localized;\n  }\n\n  static createOverrideRegion({ name, host, port }) {\n    if (!name) { throw new Error('name must not be empty'); }\n    if (!host) { throw new Error('host must not be empty'); }\n    if (typeof port !== 'number') { throw new Error('port must be a number'); }\n    if (port < 0 || port > 65535) { throw new Error('invalid port range'); }\n    const lowerCaseName = name.toLowerCase();\n    return RegionList.localize({\n      id: RegionList.createOverrideID(lowerCaseName),\n      override: true,\n      name: lowerCaseName,\n      host,\n      port,\n      ping: host,\n      macePort: port,\n      iso: 'OR',\n      scheme: 'https',\n      active: false,\n      latency: 'PENDING',\n      offline: false,\n      isFavorite: true,\n      flag: 'images/flags/override_icon_64.png',\n    });\n  }\n\n  static createNormalRegion(regionID, region) {\n    return RegionList.localize({\n      scheme: 'https',\n      id: regionID,\n      ping: region.ping,\n      name: region.name,\n      iso: region.iso,\n      host: region.dns,\n      port: region.port,\n      macePort: region.mace,\n      flag: `/images/flags/${region.iso}_icon_64.png`,\n      active: false,\n      latency: 'PENDING',\n      offline: false,\n      isFavorite: false,\n      override: false,\n    });\n  }\n\n  static debug(msg, err) {\n    const debugMsg = `regionlist.js: ${msg}`;\n    debug(debugMsg);\n    if (err) {\n      const errMsg = `regionlist.js error: ${JSON.stringify(err, Object.getOwnPropertyNames(err))}`;\n      debug(errMsg);\n    }\n    return new Error(debugMsg);\n  }\n}\n\nexport default RegionList;\n","const ERROR = 'ERROR';\nconst PENDING = 'PENDING';\n\nfunction byLatency(a, b) {\n  if (a < 0) { return 1; }\n  if (b < 0) { return -1; }\n  if (a === ERROR) { return 1; }\n  if (b === ERROR) { return -1; }\n  if (a === PENDING) { return 1; }\n  if (b === PENDING) { return -1; }\n  return a - b;\n}\n\nexport { byLatency };\n","import * as compare from '@helpers/compare';\n\nclass RegionSorter {\n  constructor(app) {\n    this.app = app;\n\n    this.nameSort = this.nameSort.bind(this);\n    this.latencySort = this.latencySort.bind(this);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  nameSort(regions) {\n    return regions.sort((a, b) => {\n      return a.name.localeCompare(b.name);\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  latencySort(regions) {\n    return regions.sort((a, b) => { return compare.byLatency(a.latency, b.latency); });\n  }\n}\n\nexport default RegionSorter;\n","import http from '@helpers/http';\n\nconst USERNAME_KEY = 'form:username';\nconst PASSWORD_KEY = 'form:password';\nconst LOGGED_IN_KEY = 'loggedIn';\nconst REMEMBER_ME_KEY = 'rememberme';\nconst AUTH_TOKEN_KEY = 'authToken';\nconst AUTH_TIMEOUT = 5000;\nconst AUTH_ENDPOINT = 'https://www.privateinternetaccess.com/api/client/v2/token';\nconst ACCOUNT_ENDPOINT = 'https://www.privateinternetaccess.com/api/client/v2/account';\n\nclass User {\n  constructor(app) {\n    // bindings\n    this.getLoggedIn = this.getLoggedIn.bind(this);\n    this.setLoggedIn = this.setLoggedIn.bind(this);\n    this.getRememberMe = this.getRememberMe.bind(this);\n    this.setRememberMe = this.setRememberMe.bind(this);\n    this.getUsername = this.getUsername.bind(this);\n    this.setUsername = this.setUsername.bind(this);\n    this.getPassword = this.getPassword.bind(this);\n    this.getAuthToken = this.getAuthToken.bind(this);\n    this.setAuthToken = this.setAuthToken.bind(this);\n    this.setAccount = this.setAccount.bind(this);\n    this.updateAccount = this.updateAccount.bind(this);\n    this.auth = this.auth.bind(this);\n    this.logout = this.logout.bind(this);\n    this.init = this.init.bind(this);\n\n    // init\n    this.app = app;\n    this.authTimeout = 5000;\n\n    // handle getting account info from localStorage\n    this.account = undefined;\n    const accountString = this.storage.getItem('account');\n    if (accountString) {\n      try { this.account = JSON.parse(accountString); }\n      catch (err) { /* noop */ }\n    }\n\n    // get credentials and loggedIn from storage\n    const { util: { storage } } = app;\n    this.username = storage.getItem(USERNAME_KEY) || '';\n    this.authToken = storage.getItem(AUTH_TOKEN_KEY) || '';\n    // init loggedIn, user#setLoggedIn relies on app to be initialized\n    this.loggedIn = (storage.getItem(LOGGED_IN_KEY) === String(true));\n  }\n\n  /* ------------------------------------ */\n  /*              Getters                 */\n  /* ------------------------------------ */\n\n  get storage() { return this.app.util.storage; }\n\n  get settings() { return this.app.util.settings; }\n\n  get icon() { return this.app.util.icon; }\n\n  get proxy() { return this.app.proxy; }\n\n  async init() {\n    const { util: { storage } } = this.app;\n    const password = storage.getItem(PASSWORD_KEY) || null;\n    // If credentials exists and loggedIn, re-auth using token\n    // NOTE: This should be removed after all users are no longer using the old auth system\n    if (password && this.username && this.getLoggedIn()) {\n      try { await this.auth(this.username, password); }\n      catch (_) { this.setLoggedIn(false); }\n    }\n    else {\n      // call setLoggedIn to setup other modules relying on user\n      this.setLoggedIn(this.getLoggedIn());\n    }\n    // clear legacy password\n    this.password = null;\n    storage.removeItem(PASSWORD_KEY);\n  }\n\n  getLoggedIn() { return this.loggedIn; }\n\n  setLoggedIn(value) {\n    const { app: { util: { settingsmanager } } } = this;\n    this.loggedIn = value;\n    this.storage.setItem(LOGGED_IN_KEY, value);\n    if (value) {\n      settingsmanager.enable();\n    }\n    else {\n      settingsmanager.disable();\n    }\n  }\n\n  getRememberMe() { return this.settings.getItem(REMEMBER_ME_KEY); }\n\n  setRememberMe(rememberMe) {\n    let username = '';\n    if (rememberMe) { username = this.getUsername(); }\n\n    // update username and rememberMe in localStorage\n    this.storage.setItem(USERNAME_KEY, username);\n    this.settings.setItem(REMEMBER_ME_KEY, Boolean(rememberMe));\n  }\n\n  getUsername() { return this.username || ''; }\n\n  setUsername(username) {\n    this.username = username.trim();\n\n    if (this.getRememberMe()) {\n      this.storage.setItem(USERNAME_KEY, this.username);\n    }\n  }\n\n  getPassword() { return this.password || ''; }\n\n  getAuthToken() { return this.authToken || ''; }\n\n  setAuthToken(authToken) {\n    this.authToken = authToken;\n    this.storage.setItem(AUTH_TOKEN_KEY, authToken);\n  }\n\n  setAccount(account) {\n    if (!account) { return; }\n    this.account = account;\n    delete this.account.email;\n    this.storage.setItem('account', JSON.stringify(account));\n  }\n\n  updateAccount() {\n    debug('user.js: start account info');\n    const headers = { Authorization: `Token ${this.authToken}` };\n    return http.get(ACCOUNT_ENDPOINT, { headers })\n      .then((res) => {\n        debug('user.js: account info ok');\n        return res.json();\n      })\n      .then((body) => {\n        this.setAccount(body);\n        return body;\n      })\n      .catch((res) => {\n        debug(`user.js: account info error, ${res.cause}`);\n      });\n  }\n\n  auth(rawUsername, password) {\n    const username = rawUsername.trim();\n    const body = JSON.stringify({ username, password });\n    const headers = { 'Content-Type': 'application/json' };\n    const options = { headers, body, timeout: AUTH_TIMEOUT };\n    return http.post(AUTH_ENDPOINT, options)\n      .then((res) => { return res.json(); })\n      .then((resBody) => {\n        // set user as authenticated\n        this.setAuthToken(resBody.token);\n        this.setLoggedIn(true);\n        this.icon.updateTooltip();\n\n        // update account information\n        this.updateAccount();\n        return resBody;\n      })\n      .catch((res) => {\n        this.setLoggedIn(false);\n        throw res;\n      });\n  }\n\n  logout(cb) { /* FIXME: remove callback for promise chaining. */\n    return this.proxy.disable()\n      .then(() => {\n        this.setLoggedIn(false);\n        this.setAuthToken(null);\n        this.icon.updateTooltip();\n        if (cb) { cb(); }\n      });\n  }\n}\n\nexport default User;\n","export default class BypassList {\n  constructor(app) {\n    // Bindings\n    this.init = this.init.bind(this);\n    this.generatePingGateways = this.generatePingGateways.bind(this);\n    this.updatePingGateways = this.updatePingGateways.bind(this);\n    this.isRuleEnabled = this.isRuleEnabled.bind(this);\n    this.popularRulesByName = this.popularRulesByName.bind(this);\n    this.visibleSize = this.visibleSize.bind(this);\n    this.restartProxy = this.restartProxy.bind(this);\n    this.getUserRules = this.getUserRules.bind(this);\n    this.setUserRules = this.setUserRules.bind(this);\n    this.addUserRule = this.addUserRule.bind(this);\n    this.removeUserRule = this.removeUserRule.bind(this);\n    this.enablePopularRule = this.enablePopularRule.bind(this);\n    this.disablePopularRule = this.disablePopularRule.bind(this);\n    this.enabledPopularRules = this.enabledPopularRules.bind(this);\n    this.toArray = this.toArray.bind(this);\n    this.saveRulesToFile = this.saveRulesToFile.bind(this);\n    this.importRules = this.importRules.bind(this);\n    this.spawnImportTab = this.spawnImportTab.bind(this);\n\n    // Init\n    this.app = app;\n    this.storage = app.util.storage;\n    this.storageKeys = {\n      userrk: 'bypasslist:customlist',\n      poprk: 'bypasslist:popularrules',\n    };\n\n    this.enabledRules = new Map([\n      [\n        'privatenetworks', [\n          '0.0.0.0/8',\n          '10.0.0.0/8',\n          '127.0.0.0/8',\n          '169.254.0.0/16',\n          '192.168.0.0/16',\n          '172.16.0.0/12',\n          '::1',\n          'localhost',\n          '*.local',\n        ],\n      ],\n      ['pinggateways', this.generatePingGateways()],\n      [this.storageKeys.userrk, []],\n      [this.storageKeys.poprk, []],\n    ]);\n\n    this.netflixBypassRules = [\n      'https://netflix.com',\n      'https://*.netflix.com',\n      'https://*.nflxvideo.net',\n      'https://*.nflximg.net',\n    ];\n\n    this.huluBypassRules = [\n      'https://*.hulu.com',\n      'https://*.hulustream.com',\n    ];\n\n    this.popularRules = Object.freeze(new Map([\n      ['netflix', this.netflixBypassRules],\n      ['hulu', this.huluBypassRules],\n    ]));\n  }\n\n  static trimUserRules(rules) {\n    return rules\n      .map((e) => {\n        return e.trim();\n      })\n      .filter((e) => {\n        return e.length > 0;\n      });\n  }\n\n  init() {\n    const { userrk, poprk } = this.storageKeys;\n    if (this.storage.hasItem(userrk) && this.storage.getItem(userrk).length > 0) {\n      this.setUserRules(this.storage.getItem(userrk).split(','));\n    }\n\n    if (this.storage.hasItem(poprk) && this.storage.getItem(poprk).length > 0) {\n      this.storage.getItem(poprk).split(',').forEach((name) => {\n        return this.enablePopularRule(name);\n      });\n    }\n  }\n\n  generatePingGateways() {\n    const { util: { regionlist } } = this.app;\n    const http = regionlist.toArray().map((r) => {\n      return `http://${r.host}:8888`;\n    });\n\n    const https = regionlist.toArray().map((r) => {\n      return `https://${r.host}:8888`;\n    });\n\n    return http.concat(https);\n  }\n\n  updatePingGateways() {\n    this.enabledRules.set('pinggateways', this.generatePingGateways());\n    if (this.app.proxy.enabled()) {\n      this.app.proxy.enable();\n    }\n  }\n\n  isRuleEnabled(ruleName) {\n    return this.enabledRules.has(ruleName);\n  }\n\n  popularRulesByName() {\n    return Array.from(this.popularRules.keys());\n  }\n\n  visibleSize() {\n    return this.getUserRules().length + this.enabledPopularRules().length;\n  }\n\n  async restartProxy(cb = () => {}) {\n    const { proxy } = this.app;\n    if (!proxy) { throw new Error(debug('proxy not ready')); }\n    if (proxy.enabled()) { await proxy.enable().then(cb); }\n    else { await Promise.resolve(cb()); }\n  }\n\n  getUserRules() {\n    return BypassList.trimUserRules(Array.from(this.enabledRules.get(this.storageKeys.userrk)));\n  }\n\n  setUserRules(rules) {\n    this.storage.setItem(this.storageKeys.userrk, BypassList.trimUserRules(Array.from(rules)).join(','));\n    this.enabledRules.set(this.storageKeys.userrk, rules);\n    return this.getUserRules();\n  }\n\n  addUserRule(string, restartProxy = false) {\n    let userString = string;\n    if (userString.endsWith('/')) { userString = string.substring(0, string.length - 1); }\n    const userRules = this.getUserRules();\n    userRules.push(userString);\n    this.setUserRules([...new Set(userRules)]);\n    if (restartProxy) { this.restartProxy(); }\n  }\n\n  removeUserRule(string, restartProxy = false) {\n    let userString = string;\n    if (userString.endsWith('/')) { userString = string.substring(0, string.length - 1); }\n    const rules = this.getUserRules();\n    this.setUserRules(rules.filter((e) => { return e !== userString; }));\n    if (restartProxy) { this.restartProxy(); }\n  }\n\n  enablePopularRule(name, restartProxy = true) {\n    if (!this.popularRulesByName().includes(name)) {\n      return Promise.reject(new Error(`${name} is not a valid popular rule`));\n    }\n    if (this.enabledPopularRules().includes(name)) { return Promise.resolve(); }\n\n    return new Promise((resolve) => {\n      const complete = () => {\n        this.storage.setItem(this.storageKeys.poprk, this.enabledPopularRules().join(','));\n        debug(`bypasslist: added ${name}`);\n        resolve();\n      };\n\n      this.enabledRules.set(name, this.popularRules.get(name));\n\n      if (restartProxy) { this.restartProxy(complete); }\n      else { complete(); }\n    });\n  }\n\n  disablePopularRule(name, restartProxy = true) {\n    if (!this.popularRulesByName().includes(name)) {\n      return Promise.reject(new Error(`${name} is not a valid popular rule`));\n    }\n\n    return new Promise((resolve, reject) => {\n      const complete = () => {\n        this.storage.setItem(this.storageKeys.poprk, this.enabledPopularRules().join(','));\n        resolve();\n        debug(`bypasslist: removed ${name}`);\n      };\n      if (this.enabledRules.has(name)) {\n        this.enabledRules.delete(name);\n        if (restartProxy) {\n          this.restartProxy(complete);\n        }\n        else {\n          complete();\n        }\n      }\n      else { reject(new Error('rule not found')); }\n    });\n  }\n\n  enabledPopularRules() {\n    const enabledRulesByName = Array.from(this.enabledRules.keys());\n    const popularRulesByName = this.popularRulesByName();\n    return popularRulesByName.filter((name) => {\n      return enabledRulesByName.includes(name);\n    });\n  }\n\n  toArray() {\n    const rules = [...Array.from(this.enabledRules.values())];\n    return [].concat(...rules.map((r) => { return typeof r === 'function' ? r() : r; }));\n  }\n\n  /**\n   * Create a file containing the current ruleset and download it on client\n   *\n   * @returns {void}\n   */\n  saveRulesToFile() {\n    // Due to a bug in chromium, the chrome.downloads API will crash the browser\n    // if used on the background script, present in Chromium 70 (unknown fix target).\n\n    // Gitlab issue: https://codex.londontrustmedia.com/extension/pia_chrome/issues/81\n    // Chromium bug: https://bugs.chromium.org/p/chromium/issues/detail?id=892133&can=1&q=extension%20downloads&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified\n    throw new Error('bypasslist.js: saveRulesToFile not available.');\n    // const payload = JSON.stringify({\n    //   popularRules: this.enabledPopularRules(),\n    //   userRules: this.getUserRules(),\n    // });\n    // const file = new File('application/json', [payload]);\n    // file.download('bypass-rules.json');\n  }\n\n  /**\n   * Import the specified rule sets into the application\n   *\n   * @param {object} rules Set of rules to import\n   * @returns {void}\n   */\n  importRules({ userRules, popularRules }) {\n    const importRuleSet = (importedRules, getRules, enableRule, disableRule) => {\n      if (Array.isArray(importedRules)) {\n        // Disable rules not in importedRules\n        getRules().forEach((rule) => {\n          if (!importedRules.includes(rule)) { disableRule(rule); }\n        });\n        // Enable importedRules\n        importedRules.forEach(enableRule);\n      }\n      // Disable all rules\n      else if (typeof importedRules === 'undefined') {\n        getRules().forEach(disableRule);\n      }\n      else { debug('rule set is invalid type, expected array'); }\n    };\n    try {\n      importRuleSet(\n        userRules,\n        this.getUserRules,\n        (name) => { return this.addUserRule(name, false); },\n        (name) => { return this.removeUserRule(name, false); },\n      );\n      importRuleSet(\n        popularRules,\n        this.enabledPopularRules,\n        (name) => { return this.enablePopularRule(name, false); },\n        (name) => { return this.disablePopularRule(name, false); },\n      );\n      this.restartProxy();\n    }\n    catch (err) {\n      debug(`failed to update rules with error: ${err}`);\n    }\n  }\n\n  /**\n   * Create a new popup window for importing rules file\n   *\n   * @returns {Promise<void>}\n   */\n  spawnImportTab() { // eslint-disable-line class-methods-use-this\n    chrome.tabs.create({\n      url: chrome.runtime.getURL('html/popups/importrules.html'),\n    });\n  }\n}\n","import http from '@helpers/http';\nimport * as compare from '@helpers/compare';\n\n/**\n * LatencyManager\n * ==============\n *\n * Responsible for managing the `latency` field for regions.\n *\n * \"round\" - record RTT for single request to region\n * \"test\" -  perform ${ROUNDS} rounds consecutively\n * \"run\" - perform ${MAX_CONCURRENT} tests concurrently\n */\nclass LatencyManager {\n  static get MAX_CONCURRENT() { return 24; }\n\n  static get ROUNDS() { return 3; }\n\n  constructor(app) {\n    this.app = app;\n\n    this.run = this.run.bind(this);\n  }\n\n  get regionlist() { return this.app.util.regionlist; }\n\n  /**\n   * Runs the latency tests\n   *\n   * @return {Promise} resolves when tests complete\n   */\n  async run() {\n    const { regionlist } = this;\n    const start = performance.now();\n    const queue = regionlist.toArray();\n    const tests = LatencyManager.array(LatencyManager.MAX_CONCURRENT).map(() => {\n      return LatencyManager.runTest({ queue, regionlist });\n    });\n    await Promise.all(tests);\n    const end = performance.now();\n    const duration = Math.floor(end - start);\n    debug(`latencymanager.js: finished latency tests in ${duration}ms`);\n  }\n\n  static async round(region) {\n    try {\n      const start = performance.now();\n      await http.head(`http://${region.ping}:8888/ping.txt`);\n      const end = performance.now();\n      const duration = Math.floor(end - start);\n      return duration;\n    }\n    catch (err) {\n      return 'ERROR';\n    }\n  }\n\n  static async runTest({ queue, regionlist }) {\n    const region = queue.pop();\n    if (!region) return Promise.resolve();\n    const results = [];\n    for (let i = 0; i < LatencyManager.ROUNDS; i++) {\n      // eslint-disable-next-line no-await-in-loop\n      results.push(await LatencyManager.round(region));\n    }\n    const latency = results.sort(compare.byLatency).shift();\n    regionlist.updateRegion({ ...region, latency });\n\n    return LatencyManager.runTest({ queue, regionlist });\n  }\n\n  static array(size) {\n    return [...Array(size)];\n  }\n}\n\nexport default LatencyManager;\n","export default class Logger {\n  constructor(app) {\n    this.app = app;\n    this.entries = [];\n    this.MAX_LOG_SIZE = 200;\n    this.listeners = new Map([\n      ['NewMessage', []],\n    ]);\n\n    // bindings\n    this.debug = this.debug.bind(this);\n    this.getEntries = this.getEntries.bind(this);\n    this.removeEntries = this.removeEntries.bind(this);\n    this.addEventListener = this.addEventListener.bind(this);\n    this.removeEventListener = this.removeEventListener.bind(this);\n    this.stringify = this.stringify.bind(this);\n  }\n\n  debug(message, condition) {\n    if (this.app.util.settings.getItem('debugmode') && (!condition || condition())) {\n      // remove extraneous entries\n      while (this.entries.length >= this.MAX_LOG_SIZE) { this.entries.shift(); }\n\n      // add this error to the debug log\n      this.entries.push([new Date().toISOString(), this.stringify(message)]);\n\n      // update any UIs with new debug messages\n      this.listeners.get('NewMessage').forEach((listener) => {\n        // try calling functions bound to 'NewMessage'\n        try { listener(this.stringify(message)); }\n        /**\n         * NOTE: This will catch a bug where if the the user is on the debug log view\n         * and resizes the window, the browser will kill the extension without giving\n         * the extension enough time to clear out the functions tied to the debug log.\n         */\n        catch (err) { this.removeEventListener('NewMessage', listener); }\n      });\n    }\n\n    return message;\n  }\n\n  getEntries() {\n    return Array.from(this.entries).reverse();\n  }\n\n  removeEntries() {\n    this.entries = [];\n  }\n\n  addEventListener(event, listener) {\n    this.listeners.get(event).push(listener);\n  }\n\n  removeEventListener(event, listener) {\n    const currentListeners = this.listeners.get(event);\n    const filteredListeners = currentListeners.filter((item) => {\n      return item !== listener;\n    });\n    this.listeners.set(event, filteredListeners);\n  }\n\n  stringify(message) {\n    if (typeof (message) === 'string') { return message; }\n    return JSON.stringify(message);\n  }\n}\n","export default function () {\n  const self = this;\n  const table = {};\n\n  self.get = (member) => { return table[member] || 0; };\n  self.inc = (member) => { table[member] = (table[member] || 0) + 1; };\n  self.del = (member) => { delete table[member]; };\n\n  return self;\n}\n","function clear(csettings) {\n  Object.values(csettings)\n    .filter((s) => { return s.isAvailable ? s.isAvailable() : true; })\n    .filter((s) => { return !s.alwaysActive; })\n    .forEach((s) => { s.clearSetting(); });\n}\n\nfunction apply(csettings, settings) {\n  Object.values(csettings)\n    .filter((s) => { return s.isAvailable ? s.isAvailable() : true; })\n    .filter((s) => { return settings.getItem(s.settingID); })\n    .forEach((s) => { s.applySetting(); });\n}\n\nclass SettingsMananger {\n  constructor(app) {\n    this.app = app;\n\n    this.enable = this.enable.bind(this);\n    this.reapply = this.reapply.bind(this);\n    this.disable = this.disable.bind(this);\n  }\n\n  enable() {\n    const {\n      app: {\n        util: { settings },\n        chromesettings,\n        contentsettings,\n      },\n    } = this;\n    apply(contentsettings, settings);\n    apply(chromesettings, settings);\n  }\n\n  /*\n     The purpose of this function is to deal with a Chrome bug where when one content setting\n     is cleared, all other content settings are also cleared! (eg camera.clear() will clear\n     microphone too). The property `microphone.isApplied()` will still be true but\n     `camera.isApplied()` won't, so it can be used to determine if the setting should be\n     reapplied again or not.\n\n     Link to Chrome Bug: https://bugs.chromium.org/p/chromium/issues/detail?id=700404#c18\n     This issue has been fixed in Chrome on Sept 21 2018.\n     Will keep this method around until at lesat 5 versions have passed.\n     Current Chrome Version: Version 69.0.3497.100 (Official Build) (64-bit)\n\n     After 5 versions have passed, add conditional code to only run the reapply method if the\n     version detected is older than Chrome version 71 (assume fix lands in that build).\n  */\n  reapply(contentsettings) {\n    const { app: { util: { settings } } } = this;\n    const enabled = settings.enabled();\n    Object.values(contentsettings)\n      .filter((s) => { return s.isAvailable ? s.isAvailable() : true; })\n      .filter((s) => { return s.isApplied(); })\n      .filter((s) => { return enabled || s.alwaysActive; })\n      .forEach((s) => { s.applySetting(); });\n  }\n\n  disable() {\n    const { app: { contentsettings, chromesettings } } = this;\n    clear(chromesettings);\n    clear(contentsettings);\n    this.reapply(contentsettings);\n  }\n}\n\nexport default SettingsMananger;\n","export default function () {\n  const errorMap = new Map();\n  const generateID = () => {\n    let errorID = '';\n    for (let i = 0; i < 3; i++) {\n      errorID += Math.random().toString(36);\n    }\n    return errorID;\n  };\n\n  this.set = (errorName, url) => {\n    const errorID = generateID();\n    errorMap.set(errorID, [errorName, url]);\n    return errorID;\n  };\n\n  this.get = (errorID) => {\n    return errorMap.get(errorID) || [];\n  };\n\n  this.delete = (errorID) => {\n    const deleted = errorMap.delete(errorID);\n    if (deleted) {\n      debug(`errorinfo.js: delete ${errorID}`);\n    }\n    else {\n      debug(`errorinfo.js: miss ${errorID}`);\n    }\n    return deleted;\n  };\n\n  return this;\n}\n","import http from '@helpers/http';\n\nexport default function i18n(app) {\n  let acceptedLocales;\n  const translations = new Map([]);\n  const rerouteMap = new Map([['pt', 'pt_BR']]);\n  const detectBrowserLocale = () => {\n    let locale = chrome.i18n.getUILanguage().replace(/-/g, '_');\n    if (this.languageMap.has(locale)) {\n      return locale;\n    }\n    locale = locale.slice(0, 2);\n\n    return rerouteMap.get(locale) || locale;\n  };\n  const detectLocale = () => {\n    const { storage } = app.util;\n    const storageLocale = storage.getItem('locale');\n    const locale = storageLocale || detectBrowserLocale();\n    if (acceptedLocales.includes(locale)) {\n      return locale;\n    }\n    return undefined;\n  };\n\n  this.languageMap = new Map([\n    ['en', 'English'],\n    ['de', 'Deutsch'],\n    ['fr', 'Franais'],\n    ['ru', ''],\n    ['it', 'Italiano'],\n    ['nl', 'Nederlands'],\n    ['tr', 'Trke'],\n    ['pl', 'Polski'],\n    ['pt_BR', 'Portugus (Brasil)'],\n    ['ja', ''],\n    ['es', 'Espaol (Mxico)'],\n    ['da', 'Dansk'],\n    ['th', ''],\n    ['zh_TW', ''],\n    ['zh_CN', ''],\n    ['ar', ''],\n    ['ko', ''],\n  ]);\n  acceptedLocales = Array.from(this.languageMap.keys());\n\n  this.domainMap = new Map([\n    ['en', 'www.privateinternetaccess.com'],\n    ['nl', 'nld.privateinternetaccess.com'],\n    ['fr', 'fra.privateinternetaccess.com'],\n    ['ru', 'rus.privateinternetaccess.com'],\n    ['it', 'ita.privateinternetaccess.com'],\n    ['ko', 'kor.privateinternetaccess.com'],\n    ['no', 'nor.privateinternetaccess.com'],\n    ['pl', 'pol.privateinternetaccess.com'],\n    ['es', 'mex.privateinternetaccess.com'],\n    ['ar', 'ara.privateinternetaccess.com'],\n    ['th', 'tha.privateinternetaccess.com'],\n    ['tr', 'tur.privateinternetaccess.com'],\n    ['ja', 'jpn.privateinternetaccess.com'],\n    ['da', 'dnk.privateinternetaccess.com'],\n    ['de', 'deu.privateinternetaccess.com'],\n    ['pt_BR', 'bra.privateinternetaccess.com'],\n    ['zh_CN', 'chi.privateinternetaccess.com'],\n    ['zh_TW', 'cht.privateinternetaccess.com'],\n  ]);\n\n\n  let worker = null;\n  this.worker = () => {\n    return worker;\n  };\n  this.defaultLocale = 'en';\n  this.locale = detectLocale() || this.defaultLocale;\n  this.domain = () => {\n    return this.domainMap.get(this.locale) || this.domainMap.get('en');\n  };\n\n  this.t = (key, variables = {}) => {\n    let message = translations.get(key) || chrome.i18n.getMessage(key);\n    Object.keys(variables).forEach((varKey) => {\n      message = message.replace(new RegExp(`%{${varKey}}`, 'g'), variables[varKey]);\n    });\n\n    return message;\n  };\n  window.t = this.t;\n\n  this.changeLocale = (locale) => {\n    const { icon } = app.util;\n    if (!acceptedLocales.includes(locale)) {\n      return new Promise((_, reject) => {\n        reject();\n      });\n    }\n    worker = http.get(`chrome-extension://${chrome.runtime.id}/_locales/${locale}/messages.json`)\n      .then(async (res) => {\n        const json = await res.json();\n        translations.clear();\n        Object.keys(json).forEach((key) => {\n          translations.set(key, json[key].message);\n        });\n        this.locale = locale;\n        icon.updateTooltip();\n        worker = null;\n\n        return locale;\n      })\n      .catch((res) => {\n        worker = null;\n\n        throw res;\n      });\n    return worker;\n  };\n\n  this.changeLocale(this.locale).catch(() => {\n    debug(`i18n: error setting locale \"${this.locale}\"`);\n    if (this.locale !== this.defaultLocale) {\n      this.changeLocale(this.defaultLocale)\n        .then(() => {\n          debug(`i18n: fell back to default locale: ${this.defaultLocale}`);\n        })\n        .catch(() => {\n          debug(`i18n: fall back to default locale(${this.defaultLocale}) failed`);\n        });\n    }\n  });\n\n  return this;\n}\n","export default function(app) {\n  this.os       = undefined\n  this.arch     = undefined\n  this.naclArch = undefined\n  this.ready    = false\n\n  this.isWindows = () => {\n    return this.os === \"win\"\n  }\n\n  this.lineEnding = () => {\n    return this.isWindows() ? \"\\r\\n\" : \"\\n\"\n  }\n\n  chrome.runtime.getPlatformInfo((details) => {\n    this.os = details.os\n    this.arch = details.arch\n    this.naclArch = details.nacl_arch\n    this.ready = true\n  })\n\n  return this\n}\n","/* eslint no-restricted-syntax: 0 */\nimport http from '@helpers/http';\nimport {\n  PART_SIZE,\n  STORAGE_TEMPLATE,\n  LATEST_TIMESTAMP_FILE,\n  RULESET_FILE_TEMPLATE,\n  MessageType,\n  channels,\n} from '@data/https-upgrade';\n\n// ======================================== //\n//                 General                  //\n// ======================================== //\n\n/**\n * Get the default channel for rulesets\n */\nexport function getDefaultChannel() {\n  return channels.find((c) => { return c.name === 'default'; });\n}\n\n/**\n * Attempt to apply a ruleset to a url\n *\n * @returns {string|undefined}\n */\nexport function applyRuleset(ruleset, url) {\n  const {\n    rule: rules,\n    exclusions,\n  } = ruleset;\n\n  if (!rules) {\n    return undefined;\n  }\n  if (typeof exclusions !== 'undefined') {\n    if (exclusions instanceof RegExp) {\n      if (exclusions.test(url)) {\n        debug(`https-upgrade/rulesets#applyRuleset: ${url} excluded`);\n        return undefined;\n      }\n    }\n    else {\n      debug('https-upgrade/rulesets#applyRuleset: invalid exclusions');\n      debug(`typeof exclusions: ${typeof exclusions}`);\n      debug(`exclusions value: ${exclusions}`);\n    }\n  }\n\n  let applied;\n  return rules.find((rule) => {\n    if (rule.to === null || rule.from === null) { return false; }\n    applied = url.replace(new RegExp(rule.from), rule.to);\n    return (applied === url) ? false : applied;\n  }) && applied;\n}\n\nasync function debugTime(name, fn) {\n  const start = performance.now();\n  const res = await Promise.resolve(fn());\n  const end = performance.now();\n  const duration = Math.floor(end - start);\n  debug(`https-upgrade: ${name} took ${duration}ms`);\n  return res;\n}\n\n// ======================================== //\n//                  Stored                  //\n// ======================================== //\n\n/**\n * Retrieve the stored rulesets from storage.local\n *\n * Break into multiple operations to avoid locking up the background thread\n *\n * @returns {*} rulesets\n */\nexport async function getStoredRulesets(storageCount) {\n  // validate storageCount\n  if (!storageCount || Number.isNaN(Number(storageCount))) {\n    throw new Error('invalid storage count value');\n  }\n  // generate keys\n  const storageKeys = Array.from(new Array(Number(storageCount)).keys())\n    .map((i) => { return STORAGE_TEMPLATE.replace('%s', i); });\n  // for each key, generate op to retrieve part from storage\n  const ops = storageKeys.map((key) => {\n    return async () => {\n      const part = await new Promise((resolve, reject) => {\n        chrome.storage.local.get(\n          key,\n          (data) => {\n            if (chrome.runtime.lastError) {\n              reject(chrome.runtime.lastError);\n            }\n            else {\n              resolve(data[key]);\n            }\n          },\n        );\n      });\n      // yield to event loop\n      await new Promise((resolve) => { setTimeout(resolve, 5); });\n\n      return part;\n    };\n  });\n  return debugTime('stage e', async () => {\n    // perform ops consecutively\n    const parts = [];\n    for (const op of ops) {\n      // eslint-disable-next-line no-await-in-loop\n      parts.push(await op());\n    }\n\n    return parts;\n  });\n}\n\n/**\n * Store the rulesets in storage.local\n *\n * Break up the operations to avoid locking up the background thread\n *\n * @returns {number} storageCount\n */\nexport async function setStoredRulesets(parts, oldCount) {\n  // create ops to push each part into storage\n  const addOps = parts.map((part, i) => {\n    return async () => {\n      await new Promise((resolve, reject) => {\n        chrome.storage.local.set(\n          { [STORAGE_TEMPLATE.replace('%s', i)]: part },\n          () => {\n            if (chrome.runtime.lastError) {\n              reject(chrome.runtime.lastError);\n            }\n            else {\n              resolve();\n            }\n          },\n        );\n      });\n      // yield to event loop\n      await new Promise((resolve) => { setTimeout(resolve, 5); });\n    };\n  });\n\n  await debugTime('stage d', async () => {\n    // delete excess parts in storage\n    if (oldCount && Number(oldCount) > parts.length) {\n      const keys = [...Array(Number(oldCount) - parts.length).keys()]\n        .map((i) => { return i + parts.length; })\n        .map((i) => { return STORAGE_TEMPLATE.replace('%s', i); });\n      await new Promise((resolve) => {\n        chrome.storage.local.remove(keys, () => {\n          if (chrome.runtime.lastError) {\n            const err = chrome.runtime.lastError;\n            debug(`https-upgrade/rulesets#setStoredRulesets: failed to remove with \"${err}\"`);\n          }\n\n          else { resolve(); }\n        });\n      });\n    }\n\n    // perform each add op consecutively\n    for (const op of addOps) {\n      // eslint-disable-next-line no-await-in-loop\n      await op();\n    }\n  });\n}\n\n// ======================================== //\n//                  Hosted                  //\n// ======================================== //\n\nexport async function getTimestamp(channel) {\n  const url = `${channel.urlPrefix}${LATEST_TIMESTAMP_FILE}`;\n  const res = await debugTime('stage a', () => {\n    return http.get(url);\n  });\n  if (!res.ok) { throw res; }\n  const text = await res.text();\n  const trimmed = text.trim();\n  if (Number.isNaN(Number(trimmed))) {\n    throw new Error('timestamp is not a number');\n  }\n  return trimmed;\n}\n\nasync function getBuffer(channel) {\n  const rulesFileUrl = `${channel.urlPrefix}${RULESET_FILE_TEMPLATE}`;\n  try {\n    return await http.get(rulesFileUrl).then((r) => { return r.arrayBuffer(); });\n  }\n  catch (err) {\n    throw new Error('failed to fetch buffers');\n  }\n}\n\n/**\n * Extract a compressed buffer\n *\n * Uses WebWorker because pako#inflate does not offer async API\n */\nasync function extract(rulesBuffer) {\n  // Get url (same as ./worker.js file)\n  const url = chrome.runtime.getURL('js/https-upgrade-worker.js');\n  const worker = new Worker(url);\n  const reqID = 0;\n  return new Promise((resolve) => {\n    worker.addEventListener('message', (e) => {\n      const { data: { payload, type } } = e;\n      if (type === MessageType.EXTRACT_RES && payload.reqID === reqID) {\n        const { extracted } = payload;\n        worker.terminate();\n        resolve(extracted);\n      }\n    });\n    worker.postMessage({\n      type: MessageType.EXTRACT_REQ,\n      payload: {\n        rulesBuffer,\n        reqID,\n      },\n    });\n  });\n}\n\n/**\n * Fetch the rulesets from specified channel\n *\n * @returns {*} results\n * @returns {number} results.timestamp\n * @returns {*} results.rulesets\n */\nexport async function getHostedRulesets(channel) {\n  try {\n    const buffer = await debugTime('stage b', () => {\n      return getBuffer(channel);\n    });\n    let { rulesets } = await debugTime('stage c', () => {\n      return extract(buffer);\n    });\n\n    // Convert exclusions\n    rulesets = rulesets.map((ruleset) => {\n      const { exclusion } = ruleset;\n      if (Array.isArray(exclusion)) {\n        return Object.assign({}, ruleset, {\n          exclusions: new RegExp(exclusion.join('|')),\n          exclusion: undefined,\n        });\n      }\n      if (exclusion) {\n        debug('https-upgrade/index.js: failed to convert exclusion');\n        debug(JSON.stringify(ruleset));\n      }\n      return ruleset;\n    });\n\n    // break into parts\n    const parts = [];\n    while (rulesets.length) {\n      parts.push(rulesets.splice(0, PART_SIZE));\n    }\n\n    return parts;\n  }\n  catch (err) {\n    debug(err.message || err.cause || err);\n    throw err;\n  }\n}\n\n// ======================================== //\n//                  Local                   //\n// ======================================== //\n\n/**\n * Convert list of rules to map of (target, ruleset) pairs\n *\n * @param {Array} parts\n *\n * @returns {Map}\n */\nexport async function partsToTargetMap(parts) {\n  const map = new Map();\n  const ops = parts.map((part) => {\n    return async () => {\n      part.forEach((ruleset) => {\n        if (!Array.isArray(ruleset.target)) {\n          debug('https-rules: rule missing target array');\n        }\n        else {\n          for (const target of ruleset.target) {\n            if (!map.has(target)) {\n              map.set(target, new Set());\n            }\n            map.get(target).add(ruleset);\n          }\n        }\n      });\n      // yield to event loop (to prevent locking up background)\n      // eslint-disable-next-line no-await-in-loop\n      await new Promise((resolve) => { setTimeout(resolve, 5); });\n    };\n  });\n  await debugTime('stage f', async () => {\n    for (const op of ops) {\n      // eslint-disable-next-line no-await-in-loop\n      await op();\n    }\n  });\n  return map;\n}\n","/* eslint no-restricted-syntax: 0 */\nimport {\n  ALARM_NAME,\n  STORAGE_COUNT_KEY,\n  LAST_UPDATED_KEY,\n  LAST_TIMESTAMP_KEY,\n  COUNTER_LIMIT,\n} from '@data/https-upgrade';\nimport {\n  getHostedRulesets,\n  getStoredRulesets,\n  setStoredRulesets,\n  partsToTargetMap,\n  getDefaultChannel,\n  getTimestamp,\n  applyRuleset,\n} from './rulesets';\n\n/**\n * HttpsUpgrade Class\n *\n * Will handle fetching & updating rulesets\n */\nclass HttpsUpgrade {\n  constructor(app) {\n    // bind\n    this.init = this.init.bind(this);\n    this.enabled = this.enabled.bind(this);\n    this.onAlarm = this.onAlarm.bind(this);\n    this.attemptUpdate = this.attemptUpdate.bind(this);\n    this.getPotentialRulesets = this.getPotentialRulesets.bind(this);\n    this.onBeforeRequest = this.onBeforeRequest.bind(this);\n    this.onCookieChanged = this.onCookieChanged.bind(this);\n    this.onCompleted = this.onCompleted.bind(this);\n    this.onErrorOccurred = this.onErrorOccurred.bind(this);\n    this.onBeforeRedirect = this.onBeforeRedirect.bind(this);\n\n    // init\n    this.app = app;\n    this.storage = app.util.storage;\n    this.rulesets = new Map();\n    this.rulesetsCache = new Map();\n    this.counter = new Map();\n    this.cookieCache = new Map();\n    this.hrefBlacklist = new Set();\n    this.updating = false;\n    this.enabledTracker = false;\n    this.upgradeToSecureAvailable = false;\n    chrome.alarms.create(ALARM_NAME, { periodInMinutes: 30 });\n    this.initializing = this.init();\n  }\n\n  /**\n   * Perform all necessary async initialization\n   *\n   * These operations could complete at ANY time after HttpsUpgrade\n   * is instantiated, therefore the class must continue to function\n   * properly before this has completed, and as it is completing\n   *\n   */\n  async init() {\n    const initOps = [];\n    // break scope to allow constructor to complete\n    await new Promise((resolve) => { setTimeout(resolve, 0); });\n\n    /*              Populate rules\n     * The update is represented by 6 time consuming stages\n     * A - Fetch the most recent timestamp\n     * B - Fetch the corresponding rules to timestamp\n     * C - Extract the rules\n     * D - Store the rules in storage\n     * E - Fetch rules from storage\n     * F - Process the rules\n     *\n     * Some stages are skipped depending on whether or not the\n     * rules are stored or whether the timestamp has changed\n     */\n    const op1 = (async () => {\n      let fromLocation;\n      const start = performance.now();\n\n      let parts = await this.attemptUpdate();\n      if (parts) {\n        fromLocation = 'hosted';\n      }\n      else {\n        fromLocation = 'stored';\n        const storageCount = this.storage.getItem(STORAGE_COUNT_KEY);\n        parts = await getStoredRulesets(storageCount);\n\n        // populate local rules (occurs in attemptUpdate)\n        this.rulesetsCache.clear();\n        this.rulesets = await partsToTargetMap(parts);\n      }\n\n      // calculate number of rules\n      const numRules = parts.reduce((count, arr) => { return count + arr.length; }, 0);\n\n      // debug info\n      const end = performance.now();\n      const duration = Math.floor(end - start);\n      debug(`https-upgrade: populating ${numRules} ${fromLocation} rulesets took ${duration}ms`);\n    })();\n    initOps.push(op1);\n\n    await Promise.all(initOps);\n  }\n\n  /**\n   * Determine if the https-upgrade setting is enabled\n   *\n   * If this is not enabled, the various listeners should\n   * not interfere/react when triggered. Also used for misc\n   * cleanup after setting is disabled.\n   */\n  enabled() {\n    const { app: { util: { settings } } } = this;\n    const enabled = (\n      settings.getItem('httpsUpgrade')\n      && settings.enabled()\n    );\n    if (!enabled && this.enabledTracker) {\n      this.counter.clear();\n      this.cookieCache.clear();\n    }\n    this.enabledTracker = enabled;\n    return enabled;\n  }\n\n  async onAlarm(alarm) {\n    if (alarm.name === ALARM_NAME) {\n      await this.attemptUpdate();\n    }\n    return undefined;\n  }\n\n  /**\n   * Attempt to fetch rulesets and store in persistent storage\n   *\n   * Will only update if the hosted timestamp has changed\n   */\n  async attemptUpdate() {\n    if (this.updating) {\n      debug('https-upgrade: cancelling update, update already in progress');\n      return false;\n    }\n    const performUpdate = async (channel, timestamp) => {\n      this.updating = true;\n      try {\n        debug('https-upgrade: updating rulesets');\n        const oldCount = this.storage.getItem(STORAGE_COUNT_KEY);\n        const parts = await getHostedRulesets(channel);\n        this.rulesetsCache.clear();\n        this.rulesets = await partsToTargetMap(parts);\n\n        // set STORAGE_COUNT_KEY\n        // in the event that the browser is closed BEFORE the timestamp is\n        // updated, we still want to successfully cleanup any potential space\n        const { length: count } = parts;\n        this.storage.setItem(STORAGE_COUNT_KEY, String(count));\n\n        // NOTE: if EU closes browser during this operation, we want\n        // to always fetch the rulesets again\n        await setStoredRulesets(parts, oldCount);\n\n        // update timestamp only AFTER the operation completes successfully\n        this.storage.setItem(LAST_TIMESTAMP_KEY, timestamp);\n        this.storage.setItem(STORAGE_COUNT_KEY, String(count));\n        this.storage.setItem(LAST_UPDATED_KEY, Date.now());\n        this.updating = false;\n        return parts;\n      }\n      catch (err) {\n        this.updating = false;\n        debug('https-upgrade: failed to update rulesets');\n        debug(err.message || err);\n        throw err;\n      }\n    };\n    debug('https-upgrade: checking if update required');\n    try {\n      const channel = getDefaultChannel();\n      const timestamp = await getTimestamp(channel);\n      const lastTimestamp = this.storage.getItem(LAST_TIMESTAMP_KEY);\n      if (!lastTimestamp) {\n        return performUpdate(channel, timestamp);\n      }\n      if (Number(timestamp) !== Number(lastTimestamp)) {\n        return performUpdate(channel, timestamp);\n      }\n      debug('https-upgrade: postponing https update');\n      return false;\n    }\n    catch (err) {\n      debug('https-upgrade: failed to update');\n      debug(err.message || err);\n      throw err;\n    }\n  }\n\n  /**\n   * Fetch the rulesets that might apply to a specific domain\n   */\n  getPotentialRulesets(domain) {\n    const isValidDomain = (target) => {\n      if (target.length <= 0) { return false; }\n      if (target.length > 255) { return false; }\n      if (target.includes('..')) { return false; }\n      return true;\n    };\n    const getRulesets = (target) => {\n      let rulesets = this.rulesetsCache.get(target);\n      if (!rulesets) {\n        rulesets = this.rulesets.get(target);\n        this.rulesetsCache.set(target, rulesets);\n      }\n      return rulesets;\n    };\n    // example domain \"x.y.z.domain.com\"\n    const results = new Set();\n    if (isValidDomain(domain)) {\n      // search for \"x.y.z.domain.com\"\n      const exactMatches = getRulesets(domain);\n      if (exactMatches) {\n        exactMatches.forEach((exactMatch) => {\n          results.add(exactMatch);\n        });\n      }\n\n      // search for\n      // \"*.y.z.domain.com\"\n      // \"*.z.domain.com\"\n      // \"*.domain.com\"\n      const splits = domain.split('.');\n      if (splits.length > 2) {\n        const root = splits.slice(-2).join('.');\n        let subdomains = splits.slice(0, -2);\n        subdomains.push('');\n        while (subdomains.length > 1) {\n          subdomains = subdomains.slice(1);\n          const target = `*.${subdomains.join('.')}${root}`;\n          const matches = getRulesets(target);\n          if (matches) {\n            matches.forEach((match) => {\n              results.add(match);\n            });\n          }\n        }\n      }\n    }\n    else {\n      debug(`https-upgrade: invalid domain for rulesets \"${domain}\"`);\n    }\n    results.delete(undefined);\n    return Array.from(results.values());\n  }\n\n  shouldSecureCookie(cookie) {\n    let shouldSecure = false;\n    let { domain } = cookie;\n    if (this.cookieCache.size > 300) {\n      this.cookieCache.delete(this.cookieCache.keys().next().value);\n    }\n    while (domain.charAt(0) === '.') {\n      domain = domain.slice(1);\n    }\n    const potentialRules = this.getPotentialRulesets(domain);\n\n    // check cache\n    const cacheItem = this.cookieCache.get(domain);\n    if (cacheItem) {\n      shouldSecure = true;\n    }\n    // update cache\n    else {\n      const fakeUrl = `http://${domain}/${Math.random()}/${Math.random()}`;\n      shouldSecure = !!potentialRules.find((ruleset) => {\n        if (applyRuleset(ruleset, fakeUrl)) {\n          this.cookieCache.set(domain, true);\n          return true;\n        }\n        return false;\n      });\n      if (!shouldSecure) {\n        this.cookieCache.set(domain, false);\n      }\n    }\n\n    if (!shouldSecure) { return false; }\n    return potentialRules\n      .filter((ruleset) => { return ruleset.securecookie; })\n      .find((ruleset) => {\n        return ruleset.securecookie.find((cr) => {\n          return !!(\n            new RegExp(cr.host).test(cookie.domain)\n            && new RegExp(cr.name).test(cookie.name)\n          );\n        });\n      });\n  }\n\n  // ======================================== //\n  //                Listeners                 //\n  // ======================================== //\n\n  /**\n   * Upgrade url to https if a matching rule is found\n   */\n  onBeforeRequest(details) {\n    if (this.enabled()) {\n      let username = '';\n      let password = '';\n      if (!details.url) { return undefined; }\n      const url = new URL(details.url);\n      // Strip trailing '.'\n      while (url.hostname.endsWith('.') && url.hostname.length > 1) {\n        url.hostname = url.hostname.slice(0, url.hostname.length - 1);\n      }\n      if (url.username || url.password) {\n        ({ username, password } = url);\n        url.username = '';\n        url.password = '';\n      }\n      if (this.hrefBlacklist.has(url.href)) {\n        return undefined;\n      }\n      if (this.counter.get(details.requestId) >= COUNTER_LIMIT) {\n        debug(`https-upgrade: blacklisting href \"${url.href}\"`);\n        this.hrefBlacklist.add(url.href);\n        return undefined;\n      }\n      const [matchedRuleset] = this.getPotentialRulesets(url.hostname);\n      if (matchedRuleset) {\n        let upgradedUrl = applyRuleset(matchedRuleset, url.href);\n        if (!upgradedUrl) { return undefined; }\n        if (username || password) {\n          const withCredentials = new URL(upgradedUrl);\n          withCredentials.username = username;\n          withCredentials.password = password;\n          upgradedUrl = withCredentials.href;\n        }\n        if (this.upgradeToSecureAvailable && upgradedUrl === details.url.replace(/^http:/, 'https:')) {\n          debug(`https-upgrade: upgrading ${details.url} using upgradeToSecure API`);\n          return { upgradeToSecure: true };\n        }\n        debug(`https-upgrade: redirecting ${details.url} to ${upgradedUrl}`);\n        return { redirectUrl: upgradedUrl };\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Secure insecure cookies\n   */\n  onCookieChanged(details) {\n    if (this.enabled()) {\n      const { cookie } = details;\n      if (!details.removed && !cookie.secure && this.shouldSecureCookie(cookie)) {\n        debug(`https-upgrade: attempting to secure cookie: ${cookie.name}`);\n        const secureCookie = Object.assign(\n          {\n            name: cookie.name,\n            value: cookie.value,\n            path: cookie.path,\n            httpOnly: cookie.httpOnly,\n            expirationDate: cookie.expirationDate,\n            storeId: cookie.storeId,\n            secure: true,\n          },\n          cookie.hostOnly ? {} : { domain: cookie.domain },\n          // https://tools.ietf.org/html/draft-west-first-party-cookies\n          cookie.sameSite ? { sameSite: cookie.sameSite } : {},\n          cookie.firstPartyDomain ? { firstPartyDomain: cookie.firstPartyDomain } : {},\n          cookie.domain.startsWith('.')\n            ? { url: `https://www${cookie.domain}${cookie.path}` }\n            : { url: `https://${cookie.domain}${cookie.path}` },\n        );\n        chrome.cookies.set(secureCookie);\n        debug(`https-upgrade: secured cookie \"${cookie.name}\" for \"${cookie.domain}\"`);\n      }\n    }\n  }\n\n  /**\n   * Handle counter on request completion\n   */\n  onCompleted(details) {\n    if (this.enabled()) {\n      const { requestId } = details;\n      if (this.counter.has(requestId)) {\n        this.counter.delete(requestId);\n        debug(`https-upgrade: clearing count for ${requestId}`);\n      }\n    }\n  }\n\n  /**\n   * Handle counter on request error\n   */\n  onErrorOccurred(details) {\n    if (this.enabled()) {\n      if (this.counter.has(details.requestId)) {\n        this.counter.delete(details.requestId);\n      }\n    }\n  }\n\n  /**\n   * Handle counter for redirects (prevent looping)\n   */\n  onBeforeRedirect(details) {\n    if (this.enabled()) {\n      if (details.redirectUrl.match(/^https?:\\/\\/.*/)) {\n        const { requestId } = details;\n        const oldCount = HttpsUpgrade.parseCount(this.counter, requestId);\n        this.counter.set(requestId, oldCount + 1);\n        debug(`https-upgrade: increment count for ${requestId} to ${oldCount + 1}`);\n      }\n    }\n  }\n\n  // ======================================== //\n  //                  Static                  //\n  // ======================================== //\n\n  static parseCount(counter, requestId) {\n    const value = counter.get(requestId);\n    if (typeof value === 'undefined') { return 0; }\n    if (typeof value === 'number' && value >= 0) {\n      return value;\n    }\n    debug(`https-upgrade: request count for ${requestId} invalid: ${value}`);\n    return 0;\n  }\n}\n\nexport default HttpsUpgrade;\n","/*\n   This object wraps a ContentSetting: https://developer.chrome.com/extensions/contentSettings#type-ContentSetting.\n   Similar to but not the same as a ChromeSetting.\n*/\nexport default function (app, contentSetting) {\n  const self = Object.create(null);\n  const defaultSetRules = { primaryPattern: '<all_urls>', scope: 'regular' };\n  const defaultClearRules = { scope: 'regular' };\n\n  let applied;\n  let ask;\n  let blocked;\n  let allowed;\n\n  self.isApplied = () => { return applied; };\n  self.isAsk = () => { return ask; };\n  self.isBlocked = () => { return blocked; };\n  self.isAllowed = () => { return allowed; };\n\n  self._set = (rules) => {\n    return new Promise((resolve, reject) => {\n      contentSetting.set(Object.assign({}, defaultSetRules, rules), () => {\n        if (chrome.runtime.lastError === undefined) {\n          applied = true;\n          ask = rules.setting === 'ask';\n          blocked = rules.setting === 'block';\n          allowed = rules.setting === 'allow';\n          resolve();\n        }\n        else {\n          reject(chrome.runtime.lastError);\n        }\n      });\n    });\n  };\n\n  self._clear = (rules = {}) => {\n    const { settingsmanager } = app.util;\n    return new Promise((resolve, reject) => {\n      contentSetting.clear(Object.assign({}, defaultClearRules, rules), () => {\n        if (chrome.runtime.lastError === undefined) {\n          blocked = false;\n          allowed = false;\n          ask = false;\n          applied = false;\n          settingsmanager.reapply(app.contentsettings);\n          resolve();\n        }\n        else {\n          reject(chrome.runtime.lastError);\n        }\n      });\n    });\n  };\n\n  return self;\n}\n","import ContentSetting from '@contentsettings/contentsetting';\n\nexport default function (app) {\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.microphone));\n\n  self.settingID = 'blockmicrophone';\n  self.settingDefault = true;\n\n  self.applySetting = () => {\n    return self._set({ setting: 'block' })\n      .then(() => {\n        debug(`microphone.js: block ok`);\n        return self;\n      }).catch((error) => {\n        debug(`microphone.js: block failed (${error})`);\n        return self;\n      });\n  };\n\n  self.clearSetting = () => {\n    return self._clear({})\n      .then(() => {\n        debug('microphone.js: unblock ok');\n        return self;\n      }).catch((error) => {\n        debug(`microphone.js: unblock failed (${error})`);\n        return self;\n      });\n  };\n\n  return self;\n}\n","import ContentSetting from '@contentsettings/contentsetting';\n\nexport default function (app) {\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.camera));\n\n  self.settingID = 'blockcamera';\n  self.settingDefault = true;\n\n  self.applySetting = () => {\n    return self._set({ setting: 'block' }).then(() => {\n      debug(`camera.js: block ok`);\n      return self;\n    }).catch((error) => {\n      debug(`camera.js: block failed (${error})`);\n      return self;\n    });\n  };\n\n  self.clearSetting = () => {\n    return self._clear({}).then(() => {\n      debug('camera.js: unblock ok');\n      return self;\n    }).catch((error) => {\n      debug(`camera.js: unblock failed(${error})`);\n      return self;\n    });\n  };\n\n  return self;\n}\n","import ContentSetting from '@contentsettings/contentsetting';\n\nexport default function (app) {\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.location));\n\n  self.settingID = 'blocklocation';\n  self.settingDefault = true;\n\n  self.applySetting = () => {\n    return self._set({setting: 'block'})\n      .then(() => {\n        debug(`location.js: block ok`);\n        return self;\n      }).catch((error) => {\n        debug(`location.js: block failed (${error})`);\n        return self;\n      });\n  };\n\n  self.clearSetting = () => {\n    return self._clear({})\n      .then(() => {\n        debug('location.js: unblock ok');\n        return self;\n      }).catch((error) => {\n        debug(`location.js: unblock failed (${error})`);\n        return self;\n      });\n  };\n\n  return self;\n}\n","import ContentSetting from '@contentsettings/contentsetting';\n\nexport default function (app) {\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.plugins));\n\n  self.settingID = 'blockadobeflash';\n  self.settingDefault = true;\n\n  self.applySetting = () => {\n    return self._set({\n      setting: 'block',\n      resourceIdentifier: { id: 'adobe-flash-player' },\n    }).then(() => {\n      debug(`flash.js: block ok`);\n      return self;\n    }).catch((error) => {\n      debug(`flash.js: block failed (${error})`);\n      return self;\n    });\n  };\n\n  self.clearSetting = () => {\n    return self._clear({}).then(() => {\n      debug('flash.js: unblock ok');\n      return self;\n    }).catch((error) => {\n      debug(`flash.js: unblock failed (${error})`);\n      return self;\n    });\n  };\n\n  return self;\n}\n","import ContentSetting from '@contentsettings/contentsetting';\n\nexport default function (app) {\n  const defaultOptions = { icon: '/images/icons/icon64.png' };\n  const self = Object.create(ContentSetting(app, chrome.contentSettings.notifications));\n  const { settings } = app.util;\n\n  self.settingID = 'allowExtensionNotifications';\n  self.settingDefault = true;\n  self.alwaysActive = true;\n\n  self.applySetting = () => {\n    return self._set({\n      setting: 'allow',\n      primaryPattern: `*://${chrome.runtime.id}/*`,\n    }).then(() => {\n      debug(`extensionNotification.js: allow ok`);\n      return self;\n    }).catch((error) => {\n      debug(`extensionNotification.js: allow failed (${error})`);\n      return self;\n    });\n  };\n\n  self.clearSetting = () => {\n    return self._clear({}).then(() => {\n      debug('extensionNotification.js: clear ok');\n      return self;\n    }).catch((error) => {\n      debug(`extensionNotification.js: clear failed (${error})`);\n      return self;\n    });\n  };\n\n  self.create = (title, options) => {\n    if (!self.isAllowed()) {\n      debug('extensionNotification.js: create failed (disabled).');\n    }\n    else {\n      debug('extensionNotification.js: create notification');\n      new Notification(title, Object.assign({}, defaultOptions, options));\n    }\n  };\n\n  self.init = () => {\n    if (!settings.hasItem(self.settingID) || settings.getItem(self.settingID)) {\n      self.applySetting();\n    }\n  };\n\n  return self;\n}\n","/*\n   This object wraps a ChromeSetting: https://developer.chrome.com/extensions/types#type-ChromeSetting\n   Similar to but not the same as a ContentSetting.\n*/\nclass ChromeSetting {\n  static get defaultSetOptions() { return { scope: 'regular' }; }\n\n  static get defaultGetOptions() { return {}; }\n\n  static get defaultClearOptions() { return { scope: 'regular' }; }\n\n  static get controlled() { return 'controlled_by_this_extension'; }\n\n  static get controllable() { return 'controllable_by_this_extension'; }\n\n  static get notControllable() { return 'not_controllable'; }\n\n  constructor(setting) {\n    // bindings\n    this.init = this.init.bind(this);\n    this.getLevelOfControl = this.getLevelOfControl.bind(this);\n    this.isControllable = this.isControllable.bind(this);\n    this.isBlocked = this.isBlocked.bind(this);\n    this.isApplied = this.isApplied.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.set = this.set.bind(this);\n    this.get = this.get.bind(this);\n    this.clear = this.clear.bind(this);\n    this.createApplySetting = this.createApplySetting.bind(this);\n    this.createClearSetting = this.createClearSetting.bind(this);\n\n    // init\n    this.setting = setting;\n    this.levelOfControl = undefined;\n    this.blocked = undefined;\n    this.applied = undefined;\n  }\n\n  async init() {\n    if (this.isAvailable()) {\n      this.setting.onChange.addListener(this.onChange);\n      await this.setting.get({}, this.onChange);\n    }\n    else {\n      this.setLevelOfControl(ChromeSetting.notControllable);\n      this.blocked = true;\n    }\n  }\n\n  isAvailable() {\n    return !!this.setting;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  onChange() {\n    throw new Error('each chromesetting must implement it\\'s own onChange listener');\n  }\n\n  /**\n   * Get the current level of control\n   *\n   * @returns {string} current level of control\n   */\n  getLevelOfControl() {\n    return this.levelOfControl;\n  }\n\n  setLevelOfControl(levelOfControl) {\n    this.levelOfControl = levelOfControl;\n  }\n\n  /**\n   * Determine whether the setting is controllable\n   *\n   * @returns {boolean} whether setting is controllable\n   */\n  isControllable() {\n    return (\n      this.levelOfControl === undefined\n      || this.levelOfControl === ChromeSetting.controlled\n      || this.levelOfControl === ChromeSetting.controllable\n    );\n  }\n\n  /**\n   * Determine whether or not the setting is blocked\n   *\n   * @returns {boolean} whether setting is blocked\n   */\n  isBlocked() {\n    return this.blocked;\n  }\n\n  setBlocked(blocked) {\n    this.blocked = blocked;\n  }\n\n  /**\n   * Determine whether or not setting is applied\n   *\n   * @returns {boolean} whether setting is applied\n   */\n  isApplied() {\n    return this.applied;\n  }\n\n  /**\n   * Set the info for the setting\n   */\n  set(options) {\n    return new Promise((resolve, reject) => {\n      if (this.isControllable()) {\n        this.setting.set(\n          Object.assign({}, ChromeSetting.defaultSetOptions, options),\n          () => {\n            if (chrome.runtime.lastError === undefined) {\n              this.applied = true;\n              resolve();\n            }\n            else {\n              reject(chrome.runtime.lastError);\n            }\n          },\n        );\n      }\n      else {\n        reject(new Error('extension cannot control this setting'));\n      }\n    });\n  }\n\n  /**\n   * Get the current info for setting\n   */\n  get() {\n    return new Promise((resolve, reject) => {\n      if (!this.isAvailable()) {\n        reject();\n        return;\n      }\n      this.setting.get(\n        ChromeSetting.defaultGetOptions,\n        async (details) => {\n          await this.onChange(details);\n          if (chrome.runtime.lastError === undefined) {\n            resolve(details);\n          }\n          else {\n            reject(chrome.runtime.lastError);\n          }\n        },\n      );\n    });\n  }\n\n  /**\n   * Clear the info for the setting\n   */\n  clear(options) {\n    return new Promise((resolve, reject) => {\n      if (this.isControllable()) {\n        this.setting.clear(\n          Object.assign({}, ChromeSetting.defaultClearOptions, options || {}),\n          () => {\n            if (chrome.runtime.lastError === undefined) {\n              this.applied = false;\n              resolve();\n            }\n            else {\n              reject(chrome.runtime.lastError);\n            }\n          },\n        );\n      }\n      else {\n        reject(new Error('extension cannot control this setting'));\n      }\n    });\n  }\n\n  createApplySetting(value, name, action) {\n    return (async function applySetting() {\n      try {\n        await this.set({ value });\n        ChromeSetting.debug(name, `${action} ok`);\n      }\n      catch (err) {\n        ChromeSetting.debug(name, `${action} failed`);\n      }\n\n      return this;\n    }).bind(this);\n  }\n\n  createClearSetting(name, action) {\n    return (async function clearSetting() {\n      try {\n        await this.clear();\n        ChromeSetting.debug(name, `${action} ok`);\n      }\n      catch (err) {\n        ChromeSetting.debug(name, `${action} failed`);\n      }\n\n      return this;\n    }).bind(this);\n  }\n\n  static debug(name, msg, err) {\n    const debugMsg = `${name}.js: ${msg}`;\n    debug(debugMsg);\n    if (err) {\n      const errMsg = `error: ${JSON.stringify(err, Object.getOwnPropertyNames(err))}`;\n      debug(errMsg);\n    }\n    return new Error(debugMsg);\n  }\n}\n\nexport default ChromeSetting;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass HyperLinkAudit extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.websites.hyperlinkAuditingEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'hyperlinkaudit',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'hyperlinkaudit',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blockhyperlinkaudit';\n    this.settingDefault = true;\n  }\n\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default HyperLinkAudit;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass WebRTCSetting extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.network.webRTCIPHandlingPolicy);\n\n    // bindings\n    this.init = this.init.bind(this);\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      'disable_non_proxied_udp',\n      'webrtc',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'webrtc',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'preventwebrtcleak';\n    this.settingDefault = true;\n  }\n\n  init() {\n    this.blockable = chrome.privacy.network.webRTCIPHandlingPolicy !== undefined;\n    super.init();\n  }\n\n  onChange(details) {\n    this.levelOfControl = details.levelOfControl;\n    this.blocked = (details.value === 'disable_non_proxied_udp');\n  }\n}\n\nexport default WebRTCSetting;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass ThirdPartyCookies extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.websites.thirdPartyCookiesAllowed);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'thirdpartycookies',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'thirdpartycookies',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blockthirdpartycookies';\n    this.settingDefault = true;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default ThirdPartyCookies;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass HttpReferer extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.websites.referrersEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'httpreferer',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'httpreferer',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blockreferer';\n    this.settingDefault = true;\n  }\n\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default HttpReferer;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass NetworkPrediction extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.network.networkPredictionEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'networkprediction',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'networkprediction',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blocknetworkprediction';\n    this.settingDefault = true;\n  }\n\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default NetworkPrediction;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass SafeBrowsing extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.services.safeBrowsingEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'safebrowsing',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'safebrowsing',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blocksafebrowsing';\n    this.settingDefault = true;\n  }\n\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default SafeBrowsing;\n","import ChromeSetting from '@chromesettings/chromesetting';\nimport http from '@helpers/http';\n\nconst ONLINE_KEY = 'online';\n\nclass BrowserProxy extends ChromeSetting {\n  constructor(app) {\n    super(chrome.proxy.settings);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n    this.settingsInMemory = this.settingsInMemory.bind(this);\n    this.enabled = this.enabled.bind(this);\n    this.readSettings = this.readSettings.bind(this);\n    this.enable = this.enable.bind(this);\n    this.disable = this.disable.bind(this);\n    this.getEnabled = this.getEnabled.bind(this);\n\n    // init\n    this.app = app;\n    this.settingID = 'proxy';\n    this.areSettingsInMemory = false;\n    // test data\n    this.changing = false;\n  }\n\n  settingsInMemory() {\n    return this.areSettingsInMemory;\n  }\n\n  getEnabled() {\n    return this.getLevelOfControl() === ChromeSetting.controlled;\n  }\n\n  enabled() {\n    return this.getEnabled();\n  }\n\n  async readSettings() {\n    await this.get();\n    BrowserProxy.debug('read settings');\n\n    return this;\n  }\n\n  async enable() {\n    this.changing = true;\n    try {\n      const { bypasslist, settings, regionlist } = this.app.util;\n      const region = regionlist.getSelectedRegion();\n      const port = settings.getItem('maceprotection') ? region.macePort : region.port;\n      const proxyRule = BrowserProxy.createProxyRule(region, port);\n      const value = {\n        mode: 'fixed_servers',\n        rules: {\n          singleProxy: proxyRule,\n          bypassList: bypasslist.toArray(),\n        },\n      };\n      await this.set({ value });\n      // Make request immediately to force handshake to proxy server\n      // Necessary because we cannot perform our side of handshake on\n      // Chrome pages for security reasons\n      http.head('https://privateinternetaccess.com');\n      BrowserProxy.debug('enabled');\n      this.changing = false;\n\n      return this;\n    }\n    catch (err) {\n      this.changing = false;\n      throw err;\n    }\n  }\n\n  async disable() {\n    this.changing = true;\n    try {\n      await this.clear();\n      BrowserProxy.debug('disabled');\n      this.changing = false;\n      return this;\n    }\n    catch (err) {\n      this.changing = false;\n      throw err;\n    }\n  }\n\n  onChange(details) {\n    const {\n      util: {\n        storage,\n        icon,\n      },\n    } = this.app;\n\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(false);\n\n    if (this.getEnabled()) {\n      icon.online();\n      storage.setItem(ONLINE_KEY, String(true));\n    }\n    else {\n      icon.offline();\n      storage.setItem(ONLINE_KEY, String(false));\n    }\n    // eslint-disable-next-line no-param-reassign\n    this.areSettingsInMemory = true;\n  }\n\n  static createProxyRule(region, port) {\n    return {\n      scheme: region.scheme,\n      host: region.host,\n      port,\n    };\n  }\n\n  static debug(msg, err) {\n    return ChromeSetting.debug('proxy', msg, err);\n  }\n}\n\nexport default BrowserProxy;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass AutoFill extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.services.autofillEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'autofill',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'autofill',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blockautofill';\n    this.settingDefault = true;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  isAvailable() {\n    return (\n      !chrome.privacy.services.autofillAddressEnabled\n      && !chrome.privacy.services.autofillCreditCardEnabled\n    );\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default AutoFill;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass AutoFillCreditCard extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.services.autofillCreditCardEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'autofillcreditcard',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'autofillcreditcard',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blockautofillcreditcard';\n    if (localStorage.getItem('settings:blockautofill') === 'false') {\n      this.settingDefault = false;\n    }\n    else {\n      this.settingDefault = true;\n    }\n  }\n\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default AutoFillCreditCard;\n","import ChromeSetting from '@chromesettings/chromesetting';\n\nclass AutoFillAddress extends ChromeSetting {\n  constructor() {\n    super(chrome.privacy.services.autofillAddressEnabled);\n\n    // bindings\n    this.onChange = this.onChange.bind(this);\n\n    // functions\n    this.applySetting = this.createApplySetting(\n      false,\n      'autofilladdress',\n      'block',\n    );\n    this.clearSetting = this.createClearSetting(\n      'autofilladdress',\n      'unblock',\n    );\n\n    // init\n    this.settingID = 'blockautofilladdress';\n    // If it exists, use value from old API\n    if (localStorage.getItem('settings:blockautofill') === 'false') {\n      this.settingDefault = false;\n    }\n    else {\n      this.settingDefault = true;\n    }\n  }\n\n  onChange(details) {\n    this.setLevelOfControl(details.levelOfControl);\n    this.setBlocked(details.value === false);\n  }\n}\n\nexport default AutoFillAddress;\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction authenticate(app) {\n  const hostR = /^https-[a-zA-Z0-9-]+\\.privateinternetaccess\\.com$/;\n\n  const active = (details) => {\n    const { proxy, util: { regionlist } } = app;\n    const proxyEnabled = proxy.getEnabled();\n    const isValidHost = regionlist.testHost(details.challenger.host);\n    const isValidPort = regionlist.testPort(details.challenger.port);\n    const isActive = proxyEnabled\n      && details.isProxy\n      && hostR.test(details.challenger.host)\n      && isValidHost\n      && isValidPort;\n\n    debug('onauthrequired.js: testing if active');\n    debug(`proxy enabled: ${proxyEnabled}`);\n    debug(`isProxy: ${details.isProxy}`);\n    debug(`challenger host: ${details.challenger.host}`);\n    debug(`challenger port: ${details.challenger.port}`);\n    debug(`possible hosts: ${JSON.stringify(regionlist.getPotentialHosts())}`);\n    debug(`possible ports: ${JSON.stringify(regionlist.getPotentialPorts())}`);\n    debug(`isActive: ${isActive}`);\n    debug('onauthrequired.js: end test');\n\n    return isActive;\n  };\n\n  return function handle(details) {\n    try {\n      debug('onauthrequired.js: servicing request for authentication');\n      if (!active(details)) { return debug('onAuthRequired/1: refused.'); }\n\n      const { counter, user } = app.util;\n\n      counter.inc(details.requestId);\n\n      if (counter.get(details.requestId) > 1) {\n        debug('onAuthRequired/1: failed.');\n        counter.del(details.requestId);\n        chrome.tabs.update({ url: chrome.extension.getURL('html/errorpages/authfail.html') });\n        user.logout();\n        return { cancel: true };\n      }\n\n      if (user.getLoggedIn()) {\n        debug('onAuthRequired/1: allowed.');\n\n        const username = user.getUsername();\n        const password = user.getPassword();\n        const token = user.getAuthToken();\n\n        let credentials = { cancel: true };\n        if (username && password) {\n          credentials = { authCredentials: { username, password } };\n        }\n        else if (token) {\n          const tokenUser = token.substring(0, token.length / 2);\n          const tokenPass = token.substring(token.length / 2);\n          credentials = { authCredentials: { username: tokenUser, password: tokenPass } };\n        }\n\n        return credentials;\n      }\n\n      debug('onAuthRequired/1: user not logged in');\n      user.logout();\n      chrome.tabs.reload(details.tabId);\n      return { cancel: true };\n    }\n    catch (err) {\n      debug('onAuthRequired/1: refused due to error');\n      debug(`error: ${JSON.stringify(err, Object.getOwnPropertyNames(err))}`);\n      return { cancel: true };\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(authenticate(app), { urls: ['<all_urls>'] }, ['blocking']);\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nexport default createApplyListener((app, addListener) => {\n  const { util: { httpsUpgrade } } = app;\n  addListener(httpsUpgrade.onBeforeRedirect, { urls: ['https://*/*'] });\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction connFailRedirect(app) {\n  const { util: { errorinfo } } = app;\n  const connUrl = `chrome-extension://${chrome.runtime.id}/html/errorpages/connfail.html`;\n\n  function isConnFailReload(url) {\n    return connUrl === url.slice(0, connUrl.length) && url.slice(-7, url.length) === '#reload';\n  }\n\n  function getErrorUrl(errorID) {\n    const url = errorinfo.get(errorID)[1];\n    return url;\n  }\n\n  return (details) => {\n    if (isConnFailReload(details.url)) {\n      const url = new URL(details.url);\n      const errorID = url.searchParams.get('id');\n      const message = {\n        id: errorID,\n        request: 'RequestErrorDelete',\n      };\n      chrome.runtime.sendMessage(message);\n      const redirectUrl = getErrorUrl(errorID);\n      if (redirectUrl) {\n        debug('connfail. try reload failed URL');\n        return { redirectUrl };\n      }\n    }\n\n    return undefined;\n  };\n}\n\nfunction filterQueryParameters(app) {\n  const { util: { settings } } = app;\n  const filterLists = {\n    blockutm: ['utm_source', 'utm_medium', 'utm_term', 'utm_content', 'utm_campaign'],\n    blockfbclid: ['fbclid'],\n  };\n\n  function containsFilterQueries(url, filterList) {\n    return !!filterList.find((param) => {\n      return url.searchParams.has(param);\n    });\n  }\n\n  function createFilteredUrl(url, filterList) {\n    const copy = new URL(url);\n    filterList.forEach((queryParam) => {\n      copy.searchParams.delete(queryParam);\n    });\n\n    return copy.toString();\n  }\n\n  function getFilterList() {\n    return Object.keys(filterLists)\n      .filter((key) => { return settings.getItem(key); })\n      .map((key) => { return filterLists[key]; })\n      .reduce((a, b) => { return [...a, ...b]; });\n  }\n\n  return (details) => {\n    if (settings.enabled()) {\n      const filterList = getFilterList();\n      const url = new URL(details.url);\n      if (filterList.length && containsFilterQueries(url, filterList)) {\n        const redirectUrl = createFilteredUrl(url, filterList);\n        if (redirectUrl) {\n          debug(`onbeforerequest.js: filtered ${JSON.stringify(filterList)}`);\n          return { redirectUrl };\n        }\n        debug(`onbeforerequest.js: failed to filter ${JSON.stringify(filterList)}`);\n      }\n    }\n    return undefined;\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  const { util: { httpsUpgrade } } = app;\n  addListener(connFailRedirect(app), { urls: ['<all_urls>'] }, ['blocking']);\n  addListener(httpsUpgrade.onBeforeRequest, { urls: ['*://*/*', 'ftp://*/*'] }, ['blocking']);\n  addListener(filterQueryParameters(app), { urls: ['<all_urls>'] }, ['blocking']);\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction onCompleted(app) {\n  return (details) => {\n    const { util: { counter } } = app;\n    if (counter.get(details.requestId) >= 1) {\n      counter.del(details.requestId);\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  const { util: { httpsUpgrade } } = app;\n  chrome.webRequest.onCompleted.addListener(httpsUpgrade.onCompleted, { urls: ['*://*/*'] });\n  addListener(onCompleted(app), { urls: ['<all_urls>'] });\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction openErrorPage(app) {\n  const networkErrors = [\n    'net::ERR_CONNECTION_RESET',\n    'net::ERR_PROXY_CONNECTION_FAILED',\n    'net::ERR_CONNECTION_TIMED_OUT',\n  ];\n  const tabQueries = [\n    { active: true, status: 'loading', url: ['http://*/*', 'https://*/*'] },\n    { active: true, status: 'complete', url: ['http://*/*', 'https://*/*'] },\n  ];\n\n  return (details) => {\n    const connectedToPIA = app.proxy.enabled();\n    const errorOnMainFrame = details.type === 'main_frame';\n    const catchableError = networkErrors.indexOf(details.error) > -1;\n\n    if (!connectedToPIA || !errorOnMainFrame || !catchableError) {\n      return { cancel: false };\n    }\n    tabQueries.forEach((query) => {\n      chrome.tabs.query(query, (tabs) => {\n        tabs.forEach((tab) => {\n          if (tab.id === details.tabId) {\n            const errorID = app.util.errorinfo.set(details.error, details.url);\n            const errorPageURL = chrome.extension.getURL(`html/errorpages/connfail.html?id=${errorID}`);\n            chrome.tabs.update(tab.id, { url: errorPageURL });\n          }\n        });\n      });\n    });\n    debug(`connection error: ${details.error}`);\n    return { cancel: true };\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(openErrorPage(app), { urls: ['<all_urls>'] });\n});\n","import createApplyListener from '@helpers/applyListener';\n\nfunction newVersionNotification(app) {\n  const isNewVersion = (newVersionStr, oldVersionStr) => {\n    const oldVersion = parseInt(oldVersionStr.replace(/\\./g, ''));\n    const newVersion = parseInt(newVersionStr.replace(/\\./g, ''));\n    return newVersion > oldVersion;\n  };\n\n  const notify = async (details) => {\n    await app.util.i18n.worker();\n    const { contentsettings } = app;\n    const title = t('ExtensionUpdated');\n    const body = t('WelcomeToNewVersion', { appVersion: `v${app.buildinfo.version}` });\n    if (isNewVersion(app.buildinfo.version, details.previousVersion)) {\n      contentsettings.extensionNotification.create(title, { body });\n    }\n  };\n\n  return (details) => {\n    if (details.reason === 'update') {\n      notify(details);\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(newVersionNotification(app));\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction initOnMessage(app) {\n  return (msg, _sender, sendResponse) => {\n    switch (msg.request) {\n      case 'RequestErrorInfo': {\n        const { errorinfo } = app.util;\n        sendResponse(errorinfo.get(msg.id));\n        break;\n      }\n      case 'RequestErrorDelete': {\n        const { errorinfo } = app.util;\n        errorinfo.delete(msg.id);\n        break;\n      }\n      case 't': {\n        const { i18n } = app.util;\n        const m = i18n.t(msg.localeKey);\n        sendResponse({ m });\n        break;\n      }\n      default: {\n        break;\n      }\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(initOnMessage(app));\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction initReload(app) {\n  return (details) => {\n    const { proxy } = app;\n    const { user } = app.util;\n    if (user.inLocalStorage() || (!user.getLoggedIn() && !proxy.enabled())) {\n      chrome.runtime.reload();\n    }\n    else {\n      debug(`onupdateavailable.js: v${details.version} will be installed when chrome restarts`);\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(initReload(app));\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nexport default createApplyListener((app, addListener) => {\n  const { util: { httpsUpgrade } } = app;\n  addListener(httpsUpgrade.onCookieChanged);\n});\n","/*\n  *** WARNING ***\n  This event handler is always active. It could be run while a direct connection is being\n  used, while another proxy extension is active, or while the Private Internet Access\n  extension is active.\n\n  Being unaware of this could introduce serious bugs that compromise the security of the\n  extension.\n\n*/\nimport createApplyListener from '@helpers/applyListener';\n\nfunction initOnAlarm(app) {\n  return function onAlarm(alarm) {\n    switch (alarm.name) {\n      case 'PollRegionList':\n        app.util.regionlist.sync()\n          .then(() => {\n            debug('onalarm.js: completed background poll of regions');\n          })\n          .catch((res) => {\n            debug(`onalarm.js: background poll of regions failed (${res.cause})`);\n          });\n        break;\n\n      default:\n        break;\n    }\n  };\n}\n\nexport default createApplyListener((app, addListener) => {\n  addListener(app.util.httpsUpgrade.onAlarm);\n  addListener(initOnAlarm(app));\n});\n","import applyOnAuthRequired from '@eventhandler/chrome/webrequest/onAuthRequired';\nimport applyOnBeforeRedirect from '@eventhandler/chrome/webrequest/onBeforeRedirect';\nimport applyOnBeforeRequest from '@eventhandler/chrome/webrequest/onBeforeRequest';\nimport applyWebRequestOnCompleted from '@eventhandler/chrome/webrequest/onCompleted';\nimport applyOnWebRequestError from '@eventhandler/chrome/webrequest/onErrorOccurred';\n\nimport applyOnInstalled from '@eventhandler/chrome/runtime/onInstalled';\nimport applyOnMessage from '@eventhandler/chrome/runtime/onMessage';\nimport applyOnUpdateAvailable from '@eventhandler/chrome/runtime/onUpdateAvailable';\n\nimport applyOnChanged from '@eventhandler/chrome/cookies/onChanged';\n\nimport applyOnAlarm from '@eventhandler/chrome/alarms/onAlarm';\n\nimport applyOnError from '@eventhandler/onError';\n\nexport default function (app) {\n  const self = {};\n  applyOnAuthRequired(app, chrome.webRequest.onAuthRequired);\n  applyOnBeforeRedirect(app, chrome.webRequest.onBeforeRedirect);\n  applyOnBeforeRequest(app, chrome.webRequest.onBeforeRequest);\n  applyWebRequestOnCompleted(app, chrome.webRequest.onCompleted);\n  applyOnWebRequestError(app, chrome.webRequest.onErrorOccurred);\n\n  applyOnInstalled(app, chrome.runtime.onInstalled);\n  applyOnMessage(app, chrome.runtime.onMessage);\n  applyOnUpdateAvailable(app, chrome.runtime.onUpdateAvailable);\n\n  applyOnChanged(app, chrome.cookies.onChanged);\n\n  applyOnAlarm(app, chrome.alarms.onAlarm);\n\n  applyOnError(app, {\n    addListener(listener) {\n      window.addEventListener('error', listener);\n    },\n  });\n\n  return self;\n}\n","import '@babel/polyfill';\n\nimport Storage from '@util/storage';\nimport Settings from '@util/settings';\nimport Icon from '@util/icon';\nimport RegionList from '@util/regionlist';\nimport RegionSorter from '@util/regionsorter';\nimport User from '@util/user';\nimport BypassList from '@util/bypasslist';\nimport LatencyManager from '@util/latencymanager';\nimport BuildInfo from '@util/buildinfo';\nimport Logger from '@util/logger';\nimport Counter from '@util/counter';\nimport SettingsManager from '@util/settingsmanager';\nimport ErrorInfo from '@util/errorinfo';\nimport I18n from '@util/i18n';\nimport PlatformInfo from '@util/platforminfo';\nimport HttpsUpgrade from '@util/https-upgrade';\n\nimport Microphone from '@contentsettings/microphone';\nimport Camera from '@contentsettings/camera';\nimport Location from '@contentsettings/location';\nimport Flash from '@contentsettings/flash';\nimport ExtensionNotification from '@contentsettings/extension_notification';\n\nimport HyperlinkAudit from '@chromesettings/hyperlinkaudit';\nimport WebRTC from '@chromesettings/webrtc';\nimport ThirdPartyCookies from '@chromesettings/thirdpartycookies';\nimport HttpReferer from '@chromesettings/httpreferer';\nimport NetworkPrediction from '@chromesettings/networkprediction';\nimport SafeBrowsing from '@chromesettings/safebrowsing';\nimport BrowserProxy from '@chromesettings/proxy';\nimport AutoFill from '@chromesettings/autofill';\nimport AutoFillCreditCard from '@chromesettings/autofillcreditcard';\nimport AutoFillAddress from '@chromesettings/autofilladdress';\nimport EventHandler from '@eventhandler/eventhandler';\n\nfunction isFrozen() {\n  return process.env.FREEZE_APP === true;\n}\n\n// build background application (self)\nconst self = Object.create(null);\nconst deepFreeze = (obj) => {\n  if (isFrozen()) {\n    Object.keys(obj).forEach((p) => {\n      // eslint-disable-next-line no-param-reassign\n      obj[p] = Object.freeze(obj[p]);\n    });\n  }\n  return Object.freeze(obj);\n};\n\n// event handling and basic browser info gathering\nself.frozen = isFrozen();\nself.buildinfo = new BuildInfo(self);\nself.logger = new Logger(self);\n\n// attach debugging to global scope\nwindow.debug = self.logger.debug;\n\n// attach utility functions\nself.util = Object.create(null);\nself.util.platforminfo = new PlatformInfo(self);\nself.util.icon = new Icon(self);\nself.util.storage = new Storage(self);\nself.util.settings = new Settings(self);\nself.util.i18n = new I18n(self);\nself.util.regionlist = new RegionList(self);\nself.util.bypasslist = new BypassList(self);\nself.util.counter = new Counter(self);\nself.util.user = new User(self);\nself.util.latencymanager = new LatencyManager(self);\nself.util.regionsorter = new RegionSorter(self);\nself.util.settingsmanager = new SettingsManager(self);\nself.util.errorinfo = new ErrorInfo(self);\nself.util.httpsUpgrade = new HttpsUpgrade(self);\nself.util = Object.freeze(self.util);\n\n/* self.proxy is a %{browser}Setting like self.chromesettings.* objects are. */\nself.proxy = new BrowserProxy(self);\nself.proxy.init();\nself.util.bypasslist.init();\n\n// setup event handler\nself.eventhandler = new EventHandler(self);\n\n// attach browser specific functions\nself.contentsettings = Object.create(null);\nself.contentsettings.camera = new Camera(self);\nself.contentsettings.microphone = new Microphone(self);\nself.contentsettings.location = new Location(self);\nself.contentsettings.flash = new Flash(self);\nself.contentsettings.extensionNotification = new ExtensionNotification(self);\n\n// attach chrome settings functions\nself.chromesettings = Object.create(null);\nself.chromesettings.networkprediction = new NetworkPrediction(self);\nself.chromesettings.httpreferer = new HttpReferer(self);\nself.chromesettings.hyperlinkaudit = new HyperlinkAudit(self);\nself.chromesettings.webrtc = new WebRTC(self);\nself.chromesettings.thirdpartycookies = new ThirdPartyCookies(self);\nself.chromesettings.safebrowsing = new SafeBrowsing(self);\n// new API starting w/ chrome 70\nself.chromesettings.autofillcreditcard = new AutoFillCreditCard(self);\nself.chromesettings.autofilladdress = new AutoFillAddress(self);\n// old API, remove after chrome 70 reaches general availability\nself.chromesettings.autofill = new AutoFill(self);\n\n// Initialize all functions\nconst initSettings = (settings) => {\n  return Object.values(settings)\n    .filter((setting) => { return setting.init; })\n    .forEach((setting) => { return setting.init(); });\n};\n\ninitSettings(self.chromesettings);\ninitSettings(self.contentsettings);\nself.util.settings.init();\n\n// Freeze settings\nself.contentsettings = deepFreeze(self.contentsettings);\n\n// check if regions are set\nconst { regionlist } = self.util;\nregionlist.sync();\n\nconst { proxy, util: { user } } = self;\nPromise.resolve()\n  // init user\n  .then(() => { return user.init(); })\n  .then(() => { return proxy.readSettings(); })\n  // check if proxy is controllable\n  .then(() => { return proxy.isControllable(); })\n  /* NOTE: controllable handling here should be ported to firefox */\n  .then(async (controllable) => {\n    const proxyOnline = self.util.storage.getItem('online') === 'true';\n    if (user.getLoggedIn() && proxyOnline && controllable) {\n      await proxy.enable();\n    }\n    else {\n      await proxy.disable();\n    }\n  })\n  .catch(async (err) => {\n    debug(err);\n    await proxy.disable();\n  });\n\nwindow.app = Object.freeze(self);\ndebug('background.js: initialized');\n"],"sourceRoot":""}